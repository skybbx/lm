<!doctype html><html lang=zh-cn><meta charset=utf-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=preconnect href=https://cdn.qylao.com><link rel=preconnect href=https://cdn.staticfile.org><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta http-equiv=x-dns-prefetch-control content="on"><link rel=dns-prefetch href=//cdn.qylao.com><link rel=dns-prefetch href=//cdn.staticfile.org><title>为Hugo博客添加搜索功能</title><meta name=description content="一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！"><meta name=author content="老麦"><link rel=stylesheet href=https://iamlm.com/scss/laomai.min.afa50f9973b165187c274762ee067769830227744af12cbb3bb4663a3c0108b0.css integrity="sha256-r6UPmXOxZRh8J0di7gZ3aYMCJ3RK8Sy7O7RmOjwBCLA=" rel="preload stylesheet" as=style><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><body style=background:url(https://cdn.qylao.com/wp-content/uploads/2022/04/sea-gc05b59c74_1920.jpg);background-size:cover;background-attachment:fixed><div class=container><div class=main-container><div class=tabs-main><input type=checkbox id=menu-btn>
<label for=menu-btn class=menu-icon><i class="fa fa-bars" aria-hidden=true></i></label><div class=main-header><div class=logo><img src=https://cdn.qylao.com/wp-content/uploads/2021/04/apple-touch-icon.png alt=老麦></div><div class=logo-con><p>一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！</div><div class=line1></div></div><div class=menu><ul class=tabs><li class=menu-item><a href=/>首页</a><li class=menu-item><a href=/archives/>文章</a><li class=menu-item><a href=/about/>关于</a><li class=menu-item><a href=/links/>友链</a></ul></div><div class=post-toc><nav id=TableOfContents><ol><li><ol><li><a href=#起因>起因</a><li><a href=#说明>说明</a><li><a href=#安装>安装</a><li><a href=#总结>总结</a></ol></ol></nav></div><div class=main-footer><p>&copy;2022老麦</p><span>已记录<span>123043</span>个字</span></div></div><div class=main-content><div class=content-header><h1>为Hugo博客添加搜索功能</h1></div><div class=line2><div class=post-time><time datetime=2021-01-03T21:00:00>2021-01-03</time></div></div><div class="content ahover"><h3 id=起因>起因</h3><p>一直以来我对博客的功能要求都不高，比如说wordpress上一些强大的主题，虽然有些功能的确是很吸引人，但我觉得很多都是可有可无的，博客发展到现在，基本都已经成了个人自娱自乐的自留地了，所以大家都各有各的选择，没有好与不好之分，只要适合就好。<p>昨天有个博友圈的朋友和我说，为什么你的博客连个搜索功能都没有的啊？太Low了。<p>其实嘛，我现在用的主题是带搜索功能的，不过是使用google的ces，所以国内都使用不了，我就把功能给关了。刚开始我也试着去修改，曾经看中了Algolia，但当时可能是太长时间没折腾了，CSS上一些基础知识都忘得七七八八了，所以一直没能把Algolia很好地融入到现在这个主题上。<p>也许是因为最近折腾多了，慢慢的也找回了点记忆，外加朋友也正好说起了这个事情，就尝试着去为博客添加一个搜索功能吧，毕竟搜索也属于博客的一个基本功能，就如评论一样，没有的话总感觉少了丝灵魂。<h3 id=说明>说明</h3><p>去<a href=https://gohugo.io/itools/search target=_blank rel=noopener>Hugo官网文档</a>找了下，这个怎么说呢，可选择的还真不是很多，有些还是三年没有更新过了的。最后我选择了<a href=https://gist.github.com/cmod/5410eae147e4318164258742dd053993 target=_blank rel=noopener>hugofastsearch</a>，官网文档是这样定义的：<blockquote><p>A usability and speed update to “GitHub Gist for Fuse.js integration” — global, keyboard-optimized search.</blockquote><p>没错，这个搜索功能其实就是官方文档中另外一个方案<a href=https://gist.github.com/eddiewebb/735feb48f50f0ddd65ae5606a1cb41ae target=_blank rel=noopener>“GitHub Gist for Fuse.js integration”</a>的升级改良版。至于有什么优缺点，老实说我也是刚用，具体好与坏现在也不好说，我当时选择这个方案是因为不用其他的依赖，也不用再输入任何的编译命令，更不用其他的工具。所以正适合追求简洁的我。<h3 id=安装>安装</h3><h4 id=添加indexjson>添加index.json</h4><p>在themes/主题文件夹/layouts/_default添加一个index.json，内容为<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>{{- $.Scratch.Add <span style=color:#ff79c6>&#34;index&#34;</span> slice -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>{{- range .Site.RegularPages -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    {{- $.Scratch.Add <span style=color:#ff79c6>&#34;index&#34;</span> (dict <span style=color:#f1fa8c>&#34;title&#34;</span> .Title <span style=color:#f1fa8c>&#34;tags&#34;</span> .Params.tags <span style=color:#f1fa8c>&#34;categories&#34;</span> .Params.categories <span style=color:#f1fa8c>&#34;contents&#34;</span> .Plain <span style=color:#f1fa8c>&#34;permalink&#34;</span> .Permalink <span style=color:#f1fa8c>&#34;date&#34;</span> .Date <span style=color:#f1fa8c>&#34;section&#34;</span> .Section) -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>{{- end -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>{{- $.Scratch.Get <span style=color:#ff79c6>&#34;index&#34;</span> | jsonify -}}
</span></span></code></pre></div><h4 id=修改配置文件configtoml>修改配置文件config.toml</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>[outputs]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  home = [<span style=color:#f1fa8c>&#34;HTML&#34;</span>, <span style=color:#f1fa8c>&#34;RSS&#34;</span>, <span style=color:#f1fa8c>&#34;JSON&#34;</span>]
</span></span></code></pre></div><h4 id=添加js文件>添加js文件</h4><p>在Hugo默认的静态文件目录/static/js/添加fastsearch.js和fuse.js。fuse.js这里建议使用官方提供fuse.min.js，下载地址：<a href=https://github.com/krisk/fuse target=_blank rel=noopener>https://github.com/krisk/fuse</a><p>fastsearch.js内容如下<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1</span><span><span style=color:#8be9fd;font-style:italic>var</span> fuse; <span style=color:#6272a4>// holds our search engine
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>var</span> fuseIndex;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3</span><span><span style=color:#8be9fd;font-style:italic>var</span> searchVisible <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>; 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4</span><span><span style=color:#8be9fd;font-style:italic>var</span> firstRun <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>; <span style=color:#6272a4>// allow us to delay loading json data unless search activated
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>var</span> list <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#39;searchResults&#39;</span>); <span style=color:#6272a4>// targets the &lt;ul&gt;
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>var</span> first <span style=color:#ff79c6>=</span> list.firstChild; <span style=color:#6272a4>// first child of search list
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>var</span> last <span style=color:#ff79c6>=</span> list.lastChild; <span style=color:#6272a4>// last child of search list
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>var</span> maininput <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#39;searchInput&#39;</span>); <span style=color:#6272a4>// input box for search
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>var</span> resultsAvailable <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>; <span style=color:#6272a4>// Did we get any search results?
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10</span><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11</span><span><span style=color:#6272a4>// ==========================================
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12</span><span><span style=color:#6272a4>// The main keyboard event listener running the show
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13</span><span><span style=color:#6272a4>//
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>document</span>.addEventListener(<span style=color:#f1fa8c>&#39;keydown&#39;</span>, <span style=color:#8be9fd;font-style:italic>function</span>(event) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16</span><span>  <span style=color:#6272a4>// CMD-/ to show / hide Search
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17</span><span><span style=color:#6272a4></span>  <span style=color:#ff79c6>if</span> (event.altKey <span style=color:#ff79c6>&amp;&amp;</span> event.which <span style=color:#ff79c6>===</span> <span style=color:#bd93f9>191</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18</span><span>      <span style=color:#6272a4>// Load json search index if first time invoking search
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19</span><span><span style=color:#6272a4></span>      <span style=color:#6272a4>// Means we don&#39;t load json unless searches are going to happen; keep user payload small unless needed
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20</span><span><span style=color:#6272a4></span>      doSearch(event)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23</span><span>  <span style=color:#6272a4>// Allow ESC (27) to close search box
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24</span><span><span style=color:#6272a4></span>  <span style=color:#ff79c6>if</span> (event.keyCode <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>27</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25</span><span>    <span style=color:#ff79c6>if</span> (searchVisible) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26</span><span>      <span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#34;fastSearch&#34;</span>).style.visibility <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;hidden&#34;</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27</span><span>      <span style=color:#8be9fd;font-style:italic>document</span>.activeElement.blur();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28</span><span>      searchVisible <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32</span><span>  <span style=color:#6272a4>// DOWN (40) arrow
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33</span><span><span style=color:#6272a4></span>  <span style=color:#ff79c6>if</span> (event.keyCode <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>40</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34</span><span>    <span style=color:#ff79c6>if</span> (searchVisible <span style=color:#ff79c6>&amp;&amp;</span> resultsAvailable) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35</span><span>      console.log(<span style=color:#f1fa8c>&#34;down&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36</span><span>      event.preventDefault(); <span style=color:#6272a4>// stop window from scrolling
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37</span><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>if</span> ( <span style=color:#8be9fd;font-style:italic>document</span>.activeElement <span style=color:#ff79c6>==</span> maininput) { first.focus(); } <span style=color:#6272a4>// if the currently focused element is the main input --&gt; focus the first &lt;li&gt;
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38</span><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>else</span> <span style=color:#ff79c6>if</span> ( <span style=color:#8be9fd;font-style:italic>document</span>.activeElement <span style=color:#ff79c6>==</span> last ) { last.focus(); } <span style=color:#6272a4>// if we&#39;re at the bottom, stay there
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39</span><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>else</span> { <span style=color:#8be9fd;font-style:italic>document</span>.activeElement.parentElement.nextSibling.firstElementChild.focus(); } <span style=color:#6272a4>// otherwise select the next search result
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40</span><span><span style=color:#6272a4></span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43</span><span>  <span style=color:#6272a4>// UP (38) arrow
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44</span><span><span style=color:#6272a4></span>  <span style=color:#ff79c6>if</span> (event.keyCode <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>38</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45</span><span>    <span style=color:#ff79c6>if</span> (searchVisible <span style=color:#ff79c6>&amp;&amp;</span> resultsAvailable) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46</span><span>      event.preventDefault(); <span style=color:#6272a4>// stop window from scrolling
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47</span><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>if</span> ( <span style=color:#8be9fd;font-style:italic>document</span>.activeElement <span style=color:#ff79c6>==</span> maininput) { maininput.focus(); } <span style=color:#6272a4>// If we&#39;re in the input box, do nothing
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48</span><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>else</span> <span style=color:#ff79c6>if</span> ( <span style=color:#8be9fd;font-style:italic>document</span>.activeElement <span style=color:#ff79c6>==</span> first) { maininput.focus(); } <span style=color:#6272a4>// If we&#39;re at the first item, go to input box
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49</span><span><span style=color:#6272a4></span>      <span style=color:#ff79c6>else</span> { <span style=color:#8be9fd;font-style:italic>document</span>.activeElement.parentElement.previousSibling.firstElementChild.focus(); } <span style=color:#6272a4>// Otherwise, select the search result above the current active one
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50</span><span><span style=color:#6272a4></span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52</span><span>});
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55</span><span><span style=color:#6272a4>// ==========================================
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56</span><span><span style=color:#6272a4>// execute search as each character is typed
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57</span><span><span style=color:#6272a4>//
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#34;searchInput&#34;</span>).onkeyup <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>function</span>(e) { 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59</span><span>  executeSearch(<span style=color:#ff79c6>this</span>.value);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62</span><span><span style=color:#8be9fd;font-style:italic>document</span>.querySelector(<span style=color:#f1fa8c>&#34;body&#34;</span>).onclick <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>function</span>(e) { 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63</span><span>    <span style=color:#ff79c6>if</span> (e.target.tagName <span style=color:#ff79c6>===</span> <span style=color:#f1fa8c>&#39;BODY&#39;</span> <span style=color:#ff79c6>||</span> e.target.tagName <span style=color:#ff79c6>===</span> <span style=color:#f1fa8c>&#39;DIV&#39;</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64</span><span>        hideSearch()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68</span><span><span style=color:#8be9fd;font-style:italic>document</span>.querySelector(<span style=color:#f1fa8c>&#34;#search-btn&#34;</span>).onclick <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>function</span>(e) { 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69</span><span>    doSearch(e)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71</span><span>  
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72</span><span><span style=color:#8be9fd;font-style:italic>function</span> doSearch(e) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73</span><span>    e.stopPropagation();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74</span><span>    <span style=color:#ff79c6>if</span> (firstRun) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75</span><span>        loadSearch() <span style=color:#6272a4>// loads our json data and builds fuse.js search index
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76</span><span><span style=color:#6272a4></span>        firstRun <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span> <span style=color:#6272a4>// let&#39;s never do this again
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77</span><span><span style=color:#6272a4></span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78</span><span>    <span style=color:#6272a4>// Toggle visibility of search box
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79</span><span><span style=color:#6272a4></span>    <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span>searchVisible) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80</span><span>        showSearch() <span style=color:#6272a4>// search visible
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81</span><span><span style=color:#6272a4></span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82</span><span>    <span style=color:#ff79c6>else</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83</span><span>        hideSearch()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87</span><span><span style=color:#8be9fd;font-style:italic>function</span> hideSearch() {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88</span><span>    <span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#34;fastSearch&#34;</span>).style.visibility <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;hidden&#34;</span> <span style=color:#6272a4>// hide search box
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89</span><span><span style=color:#6272a4></span>    <span style=color:#8be9fd;font-style:italic>document</span>.activeElement.blur() <span style=color:#6272a4>// remove focus from search box 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90</span><span><span style=color:#6272a4></span>    searchVisible <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93</span><span><span style=color:#8be9fd;font-style:italic>function</span> showSearch() {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94</span><span>    <span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#34;fastSearch&#34;</span>).style.visibility <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;visible&#34;</span> <span style=color:#6272a4>// show search box
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95</span><span><span style=color:#6272a4></span>    <span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#34;searchInput&#34;</span>).focus() <span style=color:#6272a4>// put focus in input box so you can just start typing
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96</span><span><span style=color:#6272a4></span>    searchVisible <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99</span><span><span style=color:#6272a4>// ==========================================
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100</span><span><span style=color:#6272a4>// fetch some json without jquery
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101</span><span><span style=color:#6272a4>//
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>function</span> fetchJSONFile(path, callback) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103</span><span>  <span style=color:#8be9fd;font-style:italic>var</span> httpRequest <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> XMLHttpRequest();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104</span><span>  httpRequest.onreadystatechange <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>function</span>() {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105</span><span>    <span style=color:#ff79c6>if</span> (httpRequest.readyState <span style=color:#ff79c6>===</span> <span style=color:#bd93f9>4</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106</span><span>      <span style=color:#ff79c6>if</span> (httpRequest.status <span style=color:#ff79c6>===</span> <span style=color:#bd93f9>200</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107</span><span>        <span style=color:#8be9fd;font-style:italic>var</span> data <span style=color:#ff79c6>=</span> JSON.parse(httpRequest.responseText);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108</span><span>          <span style=color:#ff79c6>if</span> (callback) callback(data);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109</span><span>      }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111</span><span>  };
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112</span><span>  httpRequest.open(<span style=color:#f1fa8c>&#39;GET&#39;</span>, path);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113</span><span>  httpRequest.send(); 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117</span><span><span style=color:#6272a4>// ==========================================
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118</span><span><span style=color:#6272a4>// load our search index, only executed once
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119</span><span><span style=color:#6272a4>// on first call of search box (CMD-/)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120</span><span><span style=color:#6272a4>//
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>function</span> loadSearch() { 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122</span><span>  console.log(<span style=color:#f1fa8c>&#39;loadSearch()&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123</span><span>  fetchJSONFile(<span style=color:#f1fa8c>&#39;/index.json&#39;</span>, <span style=color:#8be9fd;font-style:italic>function</span>(data){
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125</span><span>    <span style=color:#8be9fd;font-style:italic>var</span> options <span style=color:#ff79c6>=</span> { <span style=color:#6272a4>// fuse.js options; check fuse.js website for details
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126</span><span><span style=color:#6272a4></span>      shouldSort<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127</span><span>      location<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128</span><span>      distance<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>100</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129</span><span>      threshold<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0.4</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130</span><span>      minMatchCharLength<span style=color:#ff79c6>:</span> <span style=color:#bd93f9>2</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131</span><span>      keys<span style=color:#ff79c6>:</span> [
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132</span><span>        <span style=color:#f1fa8c>&#39;permalink&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133</span><span>        <span style=color:#f1fa8c>&#39;title&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134</span><span>        <span style=color:#f1fa8c>&#39;tags&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135</span><span>        <span style=color:#f1fa8c>&#39;contents&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136</span><span>        ]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137</span><span>    };
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138</span><span>    <span style=color:#6272a4>// Create the Fuse index
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139</span><span><span style=color:#6272a4></span>    fuseIndex <span style=color:#ff79c6>=</span> Fuse.createIndex(options.keys, data)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140</span><span>    fuse <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Fuse(data, options, fuseIndex); <span style=color:#6272a4>// build the index from the json file
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141</span><span><span style=color:#6272a4></span>  });
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">143</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">144</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">145</span><span><span style=color:#6272a4>// ==========================================
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">146</span><span><span style=color:#6272a4>// using the index we loaded on CMD-/, run 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">147</span><span><span style=color:#6272a4>// a search query (for &#34;term&#34;) every time a letter is typed
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">148</span><span><span style=color:#6272a4>// in the search box
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">149</span><span><span style=color:#6272a4>//
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">150</span><span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>function</span> executeSearch(term) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">151</span><span>  <span style=color:#8be9fd;font-style:italic>let</span> results <span style=color:#ff79c6>=</span> fuse.search(term); <span style=color:#6272a4>// the actual query being run using fuse.js
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">152</span><span><span style=color:#6272a4></span>  <span style=color:#8be9fd;font-style:italic>let</span> searchitems <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;&#39;</span>; <span style=color:#6272a4>// our results bucket
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">153</span><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">154</span><span>  <span style=color:#ff79c6>if</span> (results.length <span style=color:#ff79c6>===</span> <span style=color:#bd93f9>0</span>) { <span style=color:#6272a4>// no results based on what was typed into the input box
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">155</span><span><span style=color:#6272a4></span>    resultsAvailable <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">156</span><span>    searchitems <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;&#39;</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">157</span><span>  } <span style=color:#ff79c6>else</span> { <span style=color:#6272a4>// build our html
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">158</span><span><span style=color:#6272a4></span>    <span style=color:#6272a4>// console.log(results)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">159</span><span><span style=color:#6272a4></span>    permalinks <span style=color:#ff79c6>=</span> [];
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">160</span><span>    numLimit <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>5</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">161</span><span>    <span style=color:#ff79c6>for</span> (<span style=color:#8be9fd;font-style:italic>let</span> item <span style=color:#ff79c6>in</span> results) { <span style=color:#6272a4>// only show first 5 results
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">162</span><span><span style=color:#6272a4></span>        <span style=color:#ff79c6>if</span> (item <span style=color:#ff79c6>&gt;</span> numLimit) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">163</span><span>            <span style=color:#ff79c6>break</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">164</span><span>        }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">165</span><span>        <span style=color:#ff79c6>if</span> (permalinks.includes(results[item].item.permalink)) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">166</span><span>            <span style=color:#ff79c6>continue</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">167</span><span>        }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">168</span><span>    <span style=color:#6272a4>//   console.log(&#39;item: %d, title: %s&#39;, item, results[item].item.title)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">169</span><span><span style=color:#6272a4></span>      searchitems <span style=color:#ff79c6>=</span> searchitems <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;&lt;li&gt;&lt;a href=&#34;&#39;</span> <span style=color:#ff79c6>+</span> results[item].item.permalink <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;&#34; tabindex=&#34;0&#34;&gt;&#39;</span> <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;&lt;span class=&#34;title&#34;&gt;&#39;</span> <span style=color:#ff79c6>+</span> results[item].item.title <span style=color:#ff79c6>+</span> <span style=color:#f1fa8c>&#39;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&#39;</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">170</span><span>      permalinks.push(results[item].item.permalink);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">171</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">172</span><span>    resultsAvailable <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">173</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">174</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">175</span><span>  <span style=color:#8be9fd;font-style:italic>document</span>.getElementById(<span style=color:#f1fa8c>&#34;searchResults&#34;</span>).innerHTML <span style=color:#ff79c6>=</span> searchitems;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">176</span><span>  <span style=color:#ff79c6>if</span> (results.length <span style=color:#ff79c6>&gt;</span> <span style=color:#bd93f9>0</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">177</span><span>    first <span style=color:#ff79c6>=</span> list.firstChild.firstElementChild; <span style=color:#6272a4>// first result container — used for checking against keyboard up/down location
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">178</span><span><span style=color:#6272a4></span>    last <span style=color:#ff79c6>=</span> list.lastChild.firstElementChild; <span style=color:#6272a4>// last result container — used for checking against keyboard up/down location
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">179</span><span><span style=color:#6272a4></span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">180</span><span>}
</span></span></code></pre></div><h4 id=添加html代码到主题里>添加HTML代码到主题里</h4><p>这里因为每个主题可能存在差异，所以请根据自己实际的情况做出相应的更改。我选择将代码添加到页头的菜单栏后面，在/layouts/partials/header.html添加<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>      &lt;<span style=color:#ff79c6>li</span> <span style=color:#50fa7b>class</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;menu-item&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>        &lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>id</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;search-btn&#34;</span> <span style=color:#50fa7b>style</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;display: inline-block;&#34;</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;javascript:void(0);&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>          &lt;<span style=color:#ff79c6>i</span> <span style=color:#50fa7b>class</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;iconfont&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>            {{ partial &#34;svg/search.svg&#34; }}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>          &lt;/<span style=color:#ff79c6>i</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>        &lt;/<span style=color:#ff79c6>a</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>        &lt;<span style=color:#ff79c6>div</span> <span style=color:#50fa7b>id</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;fastSearch&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>          &lt;<span style=color:#ff79c6>input</span> <span style=color:#50fa7b>id</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;searchInput&#34;</span> <span style=color:#50fa7b>tabindex</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;0&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>          &lt;<span style=color:#ff79c6>ul</span> <span style=color:#50fa7b>id</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;searchResults&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>          &lt;/<span style=color:#ff79c6>ul</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>        &lt;/<span style=color:#ff79c6>div</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>      &lt;/<span style=color:#ff79c6>li</span>&gt;
</span></span></code></pre></div><p>li标签是继承主题，i标签是因为调用了图标。<h4 id=在主题模板上引用js>在主题模板上引用js</h4><p>我使用的主题有一个专门引用js的模板，所以我选择在此添加引用。选择/layouts/partials/scripts.html添加<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#6272a4>&lt;!-- Fastsearch --&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>&lt;<span style=color:#ff79c6>script</span> <span style=color:#50fa7b>src</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/js/fuse.min.js&#34;</span>&gt;&lt;/<span style=color:#ff79c6>script</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>&lt;<span style=color:#ff79c6>script</span> <span style=color:#50fa7b>src</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/js/fastsearch.js&#34;</span>&gt;&lt;/<span style=color:#ff79c6>script</span>&gt;
</span></span></code></pre></div><h4 id=添加css样式>添加CSS样式</h4><p>添加样式我们尽量选择对应的模板来添加，比如说我是在header里修改的，那么我就直接选择在/assets/sass/_partial/_header.scss添加CSS样式了。如果你使用的主题没有模板CSS的话，直接在主题的主CSS上添加。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>#fastSearch {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>  <span style=color:#50fa7b>visibility</span><span style=color:#ff79c6>:</span> hidden;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>  <span style=color:#50fa7b>position</span><span style=color:#ff79c6>:</span> absolute;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  <span style=color:#50fa7b>right</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  <span style=color:#50fa7b>top</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>30</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  <span style=color:#50fa7b>display</span><span style=color:#ff79c6>:</span> inline-block;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  <span style=color:#50fa7b>width</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>320</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>  <span style=color:#50fa7b>margin</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span> <span style=color:#bd93f9>10</span><span style=color:#8be9fd>px</span> <span style=color:#bd93f9>0</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  <span style=color:#50fa7b>padding</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>#fastSearch <span style=color:#ff79c6>input</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>  <span style=color:#50fa7b>padding</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>4</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  <span style=color:#50fa7b>width</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>100</span><span style=color:#8be9fd>%</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>  <span style=color:#50fa7b>height</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>31</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>1</span><span style=color:#8be9fd>em</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>  <span style=color:#50fa7b>color</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>#465373</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>  <span style=color:#50fa7b>font-weight</span><span style=color:#ff79c6>:</span> bold;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>  <span style=color:#50fa7b>background-color</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>#95B0F4</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>  <span style=color:#50fa7b>border-radius</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>3</span><span style=color:#8be9fd>px</span> <span style=color:#bd93f9>3</span><span style=color:#8be9fd>px</span> <span style=color:#bd93f9>0</span><span style=color:#8be9fd>px</span> <span style=color:#bd93f9>0</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>  <span style=color:#50fa7b>border</span><span style=color:#ff79c6>:</span> none;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>  <span style=color:#50fa7b>outline</span><span style=color:#ff79c6>:</span> none;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>  <span style=color:#50fa7b>text-align</span><span style=color:#ff79c6>:</span> left;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>  <span style=color:#50fa7b>display</span><span style=color:#ff79c6>:</span> inline-block;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>#fastSearch <span style=color:#ff79c6>ul</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>  <span style=color:#50fa7b>list-style</span><span style=color:#ff79c6>:</span> none;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>  <span style=color:#50fa7b>margin</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>  <span style=color:#50fa7b>padding</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>#searchResults <span style=color:#ff79c6>li</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>  <span style=color:#50fa7b>list-style</span><span style=color:#ff79c6>:</span> none;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>  <span style=color:#50fa7b>margin-left</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span><span style=color:#8be9fd>em</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>  <span style=color:#50fa7b>background-color</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>#E1E7F7</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>  <span style=color:#50fa7b>border-bottom</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>1</span><span style=color:#8be9fd>px</span> dotted <span style=color:#bd93f9>#465373</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span>#searchResults <span style=color:#ff79c6>li</span> <span style=color:#50fa7b>.title</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>.9</span><span style=color:#8be9fd>em</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span>  <span style=color:#50fa7b>margin</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span>  <span style=color:#50fa7b>display</span><span style=color:#ff79c6>:</span> inline-block;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span><span>#searchResults {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span><span>  <span style=color:#50fa7b>visibility</span><span style=color:#ff79c6>:</span> inherit;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span><span>  <span style=color:#50fa7b>display</span><span style=color:#ff79c6>:</span> inline-block;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span><span>  <span style=color:#50fa7b>width</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>328</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span><span>  <span style=color:#50fa7b>margin</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span><span>  <span style=color:#50fa7b>max-height</span><span style=color:#ff79c6>:</span> <span style=color:#50fa7b>calc</span>(<span style=color:#bd93f9>100</span><span style=color:#8be9fd>vh</span> <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>120</span><span style=color:#8be9fd>px</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span><span>  <span style=color:#50fa7b>overflow</span><span style=color:#ff79c6>:</span> hidden;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span><span>#searchResults <span style=color:#ff79c6>a</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span><span>  <span style=color:#50fa7b>text-decoration</span><span style=color:#ff79c6>:</span> none <span style=color:#ff79c6>!important</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57</span><span>  <span style=color:#50fa7b>padding</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>10</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58</span><span>  <span style=color:#50fa7b>display</span><span style=color:#ff79c6>:</span> inline-block;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59</span><span>  <span style=color:#50fa7b>width</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>100</span><span style=color:#8be9fd>%</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62</span><span>#searchResults <span style=color:#ff79c6>a</span>:hover<span style=color:#ff79c6>,</span> #searchResults <span style=color:#ff79c6>a</span>:focus {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63</span><span>  <span style=color:#50fa7b>outline</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64</span><span>  <span style=color:#50fa7b>background-color</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>#95B0F4</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65</span><span>  <span style=color:#50fa7b>color</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>#fff</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68</span><span>#search-btn {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">69</span><span>  <span style=color:#50fa7b>position</span><span style=color:#ff79c6>:</span> sticky;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">70</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>20</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">71</span><span>}
</span></span></code></pre></div><p>这里需要根据自己主题来进行稍微的修改。<h3 id=总结>总结</h3><p>其实跟着官方的教程一步步来集成还是很简单的，十分、八分钟吧。在使用后觉得反应是真的快，比之前使用的Algolia快太多了，而且还方便，Algolia在<code>hugo</code>之后还得输入<code>npm run algolia</code>，fastsearch不需任何命令，正常的<code>hugo</code>就行。</div><div class="content-tags ahover"><ul><li><a href=/tags/hugo>#hugo</a><li><a href=/tags/%E8%AE%B0%E5%BD%95>#记录</a></ul></div><nav class=post-nav><a class=prev href=/2021/post-45/><i class="fa fa-chevron-left" aria-hidden=true></i>
<span class="prev-text nav-default">近况</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/2020/post-43/><span class="next-text nav-default">别了2020</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class="fa fa-chevron-right" aria-hidden=true></i></a></nav><div class=content-footer><script src=https://unpkg.com/@waline/client@v2/dist/waline.js></script>
<link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><div id=waline class=waline-container></div><style>:root{--waline-font-size:1rem;--waline-theme-color:rgba(0,0,0,0.7);--waline-active-color:#202020;--waline-badge-color:rgba(0,0,0,0.9)}.wl-power{display:none}.wl-emoji{width:1rem}.wl-card .wl-badge{display:inline-block;margin-right:1em;padding:0;border:0 solid var(--waline-badge-color);border-radius:0;color:var(--waline-badge-color);font-size:var(--waline-badge-font-size)}</style><script>Waline.init({avatarCDN:"https://sdn.geekzu.org/avatar/",dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.qylao.com/emojis/weibo"],lang:"zh-cn",locale:{admin:"🖊"},placeholder:"在这里分享您的观点与想法，昵称、邮箱必填，邮件通知回复。",requiredMeta:["nick","mail"],serverURL:"https://comments.iamlm.com/",visitor:!0})</script></div></div></div></div><link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel=stylesheet><script src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script>
<script defer src="data:application/javascript,var%20styleAuthorUrl=%60%0D%0Acolor:%20rgb(248,248,255);%0D%0Abackground-color:%20%238B8989;%0D%0Apadding:%205px%2010px;%0D%0Aborder-radius:%205px;%0D%0A%60,authorUrl=%22laomai.org%22;console.log(%60%25c$%7BauthorUrl%7D%60,styleAuthorUrl),window.loadphotoswipejs%26%26window.alert(%22You've%20loaded%20load-photoswipe.js%20twice.%20See%20https://github.com/liwenyip/hugo-easy-gallery/issues/6%22);var%20loadphotoswipejs=1;$(document).ready(function()%7Bvar%20items=%5B%5D;$(%22.post-content%20p%20%3E%20img,%20figure%22).each(function()%7Bvar%20$this=$(this),$a,$img,$src,$title,$msrc;if($this.attr(%22class%22)==%22no-photoswipe%22)return!0;if($this%5B0%5D.tagName===%22IMG%22?($src=$this%5B0%5D.src,$msrc=$this%5B0%5D.src,$title=$this%5B0%5D.alt):($a=$this.find(%22a%22),$img=$this.find(%22img%22),$src=$a.attr(%22href%22),$title=$img.attr(%22alt%22),$msrc=$img.attr(%22src%22)),$a%26%26$a.data(%22size%22))var%20$size=$a.data(%22size%22).split(%22x%22),item=%7Bsrc:$src,w:$size%5B0%5D,h:$size%5B1%5D,title:$title,msrc:$msrc%7D;else%7Bvar%20item=%7Bsrc:$src,w:800,h:600,title:$title,msrc:$msrc%7D,img=new%20Image;img.src=$src;var%20wait=setInterval(function()%7Bvar%20w=img.naturalWidth,h=img.naturalHeight;w%26%26h%26%26(clearInterval(wait),item.w=w,item.h=h)%7D,30)%7Dvar%20index=items.length;items.push(item),$this.on(%22click%22,function(event)%7Bevent.preventDefault();var%20$pswp=$(%22.pswp%22)%5B0%5D,options=%7Bindex,bgOpacity:.8,showHideOpacity:!0%7D;new%20PhotoSwipe($pswp,PhotoSwipeUI_Default,items,options).init()%7D)%7D)%7D)"></script>