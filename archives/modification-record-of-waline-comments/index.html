<!doctype html><html lang=zh-cn><meta charset=utf-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=preconnect href=https://cdn.qylao.com><link rel=preconnect href=https://cdn.staticfile.org><meta http-equiv=x-dns-prefetch-control content="on"><link rel=dns-prefetch href=//cdn.qylao.com><link rel=dns-prefetch href=//cdn.staticfile.org><title>Walineè¯„è®ºä¹‹ä¿®æ”¹è®°å½•</title><meta name=description content="ä¸€ä¸ªç®€å•çš„åšå®¢ï¼Œä¸€ä¸ªå¹³å‡¡çš„åšä¸»ï¼Œç”¨æœ€æ‰‘å®çš„è¯è®°å½•æœ€çœŸå®çš„è‡ªå·±ï¼"><meta name=author content="è€éº¦"><link rel=stylesheet href=https://iamlm.com/scss/laomai.min.d794b1c7a4a7f95bd4146bdc97829cd6fe17fd4c83f582133c93df935ba84f9c.css integrity="sha256-15Sxx6Sn+VvUFGvcl4Kc1v4X/UyD9YITPJPfk1uoT5w=" rel="preload stylesheet" as=style><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><body style=background:url(https://cdn.qylao.com/wp-content/uploads/2022/04/sea-gc05b59c74_1920.jpg);background-size:cover;background-attachment:fixed><div class=container><div class=main-container><div class=tabs-main><input type=checkbox id=menu-btn>
<label for=menu-btn class=menu-icon><i class="fa fa-bars" aria-hidden=true></i></label><div class=main-header><div class=logo><img src=https://cdn.qylao.com/wp-content/uploads/2021/04/apple-touch-icon.png alt=è€éº¦></div><div class=logo-con><p>ä¸€ä¸ªç®€å•çš„åšå®¢ï¼Œä¸€ä¸ªå¹³å‡¡çš„åšä¸»ï¼Œç”¨æœ€æ‰‘å®çš„è¯è®°å½•æœ€çœŸå®çš„è‡ªå·±ï¼</div><div class=line1></div></div><div class=menu><ul class=tabs><li class=menu-item><a href=/>é¦–é¡µ</a><li class=menu-item><a href=/archives/>æ–‡ç« </a><li class=menu-item><a href=/about/>å…³äº</a><li class=menu-item><a href=/links/>å‹é“¾</a></ul></div><div class=post-toc><nav id=TableOfContents><ol><li><a href=#walineè¯„è®ºæ˜µç§°ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦>Walineè¯„è®ºæ˜µç§°ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦</a><ol><li><a href=#ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡</a><li><a href=#é‡æ„waline-client>é‡æ„Waline Client</a><li><a href=#å¼•ç”¨æ–°çš„å®¢æˆ·ç«¯>å¼•ç”¨æ–°çš„å®¢æˆ·ç«¯</a></ol><li><a href=#gravatarå¤´åƒ>Gravatarå¤´åƒ</a><ol><li><a href=#walineä¸Šæ›´æ¢å¤´åƒcdn>Walineä¸Šæ›´æ¢å¤´åƒCDN</a><li><a href=#wordpressä¸Šæ›´æ¢å¤´åƒcdn>Wordpressä¸Šæ›´æ¢å¤´åƒCDN</a></ol></ol></nav></div><div class=main-footer><p>&copy;2022è€éº¦</p><span>å·²è®°å½•<span>124904</span>ä¸ªå­—</span></div></div><div class=main-content><div class=content-header><h1>Walineè¯„è®ºä¹‹ä¿®æ”¹è®°å½•</h1></div><div class=line2><div class=post-time><time datetime=2021-08-15T00:00:00>2021-08-15</time></div></div><div class="content ahover"><p>ä¾ç¨€è®°å¾—2016å¹´ä¸­æ—¶æˆ‘è´­ä¹°äº†äººç”Ÿç¬¬ä¸€å°ï¼ˆä¹Ÿæ˜¯å”¯ä¸€ä¸€å°ï¼‰é”¤å­æ‰‹æœºâ€”â€”Smartisan T2ã€‚å½“æ—¶æ˜¯å—äº†ä¸€ä¸ªåŒäº‹çš„è›Šæƒ‘ï¼Œä½†ä½¿ç”¨æ²¡å¤šä¹…å°±åœ¨ä¸€æ¬¡é†‰é…’åä¸¢å¤±äº†ã€‚ä¸é”¤å­æ‰‹æœºçš„è¿™æ¬¡çŸ­æš‚ç›¸ä¼šï¼Œè®©æˆ‘çŸ¥é“äº†ä¸€ä¸ªæŠ˜è…¾ç‰›äººï¼Œå°±æ˜¯é”¤å­ç§‘æŠ€çš„åˆ›å§‹äººâ€”â€”ç½—æ°¸æµ©ã€‚<blockquote><p>æˆ‘ä¸æ˜¯ä¸ºäº†è¾“èµ¢ï¼Œæˆ‘å°±æ˜¯è®¤çœŸã€‚</blockquote><p>ã€Šç”Ÿå‘½ä¸æ¯ æŠ˜è…¾ä¸æ­¢ã€‹â€”â€”å½“ä½ è¯•å›¾æ”¾å¼ƒä¸€ä¸ªä½ çŸ¥é“æ˜¯æ­£ç¡®çš„äº‹æƒ…çš„æ—¶å€™ï¼Œå¸Œæœ›ä½ èƒ½çœ‹çœ‹è¿™æœ¬ä¹¦ã€‚è¿™æ˜¯ä¸€ä¸ªç†æƒ³ä¸»ä¹‰è€…çš„å¥‹æ–—ã€‚<p>ä¹Ÿè®¸å—è€ç½—å½±å“å§ï¼Œä¸€ç›´ä»¥æ¥æˆ‘éƒ½æŒºçˆ±æŠ˜è…¾çš„ã€‚<h2 id=walineè¯„è®ºæ˜µç§°ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦>Walineè¯„è®ºæ˜µç§°ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦</h2><p>éƒ¨ç½²å¥½Walineåæˆ‘åœ¨æœ¬åœ°æµ‹è¯•æ—¶å‘ç°ä¸€ä¸ªä¸ªäººè§‰å¾—æ¯”è¾ƒå¥‡æ€ªçš„é—®é¢˜ï¼Œæˆ‘è¾“å…¥æ˜µç§°â€œè€éº¦â€å¹¶è¿›è¡Œè¯„è®ºæ—¶æç¤ºä¸€ä¸ªé”™è¯¯ï¼Œã€Œæ˜µç§°ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦ã€ã€‚è€å®è¯´ï¼Œè¿™ä¸ªæˆ‘è¿˜æ˜¯æœ‰ç‚¹ä¸èƒ½ç†è§£çš„ï¼ŒWalineä½œè€…ä¸çŸ¥ä¸ºä½•ä¼šä½œå‡ºè¿™æ ·çš„é™åˆ¶ï¼Œæ¯•ç«Ÿç”¨ä¸¤ä¸ªä¸­æ–‡å­—ä½œä¸ºæ˜µç§°çš„äººè¿˜æ˜¯å¾ˆå¤šçš„ã€‚<p>è¯•å›¾åœ¨å®˜æ–¹æ–‡æ¡£é‡Œæ‰¾è¿™ä¸ªé…ç½®å‚æ•°ï¼Œæ— æœï¼Œåªå¥½é€‰æ‹©é‡æ–°æ„å»ºClientã€‚<h3 id=ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡</h3><p>å®‰è£…<a href=https://nodejs.org/en/ target=_blank rel=noopener>Node.js (nodejs.org)</a>ï¼Œæ‰“å¼€å®˜ç½‘æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸¤ä¸ªç‰ˆæœ¬è¿›è¡Œå®‰è£…ï¼Œä¸€ä¸ªæ˜¯<code>14.17.5 LTS</code>ï¼Œå¦å¤–ä¸€ä¸ªç‰ˆæœ¬åˆ™æ˜¯<code>16.6.2 Current</code>ï¼Œè™½ç„¶Node 14é»˜è®¤ä½¿ç”¨npm@v6ï¼Œä½†è¿˜æ˜¯å»ºè®®å®‰è£…LTSç‰ˆæœ¬ï¼Œæ¯•ç«Ÿç¨³å®šæ‰æ˜¯ç‹é“ã€‚ç”±äºWalineéœ€è¦ç”¨åˆ°npm@v7ç‰ˆæœ¬ï¼Œæ‰€ä»¥å¦‚æœå®‰è£…<code>14.17.5 LTS</code>ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ›´æ–°ä¸€ä¸‹npmçš„ç‰ˆæœ¬ã€‚<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>npm i -g npm
</span></span></code></pre></div><p><strong>æ‹‰å–é¡¹ç›®ï¼š</strong><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>git clone https://github.com/walinejs/waline.git
</span></span></code></pre></div><p><strong>å®‰è£…ä¾èµ–ï¼š</strong><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>// è¿›å…¥é¡¹ç›®ç›®å½•
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#8be9fd;font-style:italic>cd</span> waline
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>// å®‰è£…é¡¹ç›®ä¾èµ–
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>npm i
</span></span></code></pre></div><h3 id=é‡æ„waline-client>é‡æ„Waline Client</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>// è¿›å…¥Clientç›®å½•
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#8be9fd;font-style:italic>cd</span> ./packages/client/
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>// ç”¨VSCodeæ‰“å¼€è¯¥ç›®å½•
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>code .
</span></span></code></pre></div><p>æ‰“å¼€<code>\src\components\CommentBox.vue</code>ï¼Œæœç´¢<code>// check nick</code>ï¼›<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#6272a4>// check nick
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#6272a4></span>        <span style=color:#ff79c6>if</span> (
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>          (requiredMeta.indexOf(<span style=color:#f1fa8c>&#39;nick&#39;</span>) <span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>-</span><span style=color:#bd93f9>1</span> <span style=color:#ff79c6>||</span> comment.nick) <span style=color:#ff79c6>&amp;&amp;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>          comment.nick.length <span style=color:#ff79c6>&lt;</span> <span style=color:#bd93f9>3</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>        ) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>          inputRefs.value.nick<span style=color:#ff79c6>?</span>.focus();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>          <span style=color:#ff79c6>return</span> alert(locale.value.nickError);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>        }
</span></span></code></pre></div><p>å°†<code>comment.nick.length &lt; 3</code>ä¿®æ”¹æˆ<code>comment.nick.length &lt; 2</code>ï¼Œä¿å­˜ï¼›<p>è¿è¡Œ<code>npm run build</code>ï¼Œè¿™æ ·Walineçš„å®¢æˆ·ç«¯å°±å®Œæˆæ„å»ºäº†ã€‚<h3 id=å¼•ç”¨æ–°çš„å®¢æˆ·ç«¯>å¼•ç”¨æ–°çš„å®¢æˆ·ç«¯</h3><p>æ–¹æ³•å¾ˆç®€å•ï¼Œå°†ç”Ÿæˆç›®å½•<code>dist</code>é‡Œçš„æ–‡ä»¶git pushåˆ°Githubä¸Šï¼Œå¥—ä¸ŠJsdelivrå°±å¯ä»¥ç›´æ¥å¼•ç”¨äº†ã€‚<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#6272a4>// hugo-theme-stack é»˜è®¤çš„å¼•å…¥ä»£ç 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>&lt;script src=&#39;<span style=color:#6272a4>//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js&#39;&gt;&lt;/script&gt;
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#6272a4></span>&lt;div id=<span style=color:#f1fa8c>&#34;waline&#34;</span> class=<span style=color:#f1fa8c>&#34;waline-container&#34;</span>&gt;&lt;<span style=color:#ff79c6>/</span>div&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>&lt;style&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    .waline<span style=color:#ff79c6>-</span>container {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>        background<span style=color:#ff79c6>-</span>color: <span style=color:#8be9fd;font-style:italic>var</span>(<span style=color:#ff79c6>--</span>card<span style=color:#ff79c6>-</span>background);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>        border<span style=color:#ff79c6>-</span>radius: <span style=color:#8be9fd;font-style:italic>var</span>(<span style=color:#ff79c6>--</span>card<span style=color:#ff79c6>-</span>border<span style=color:#ff79c6>-</span>radius);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>        box<span style=color:#ff79c6>-</span>shadow: <span style=color:#8be9fd;font-style:italic>var</span>(<span style=color:#ff79c6>--</span>shadow<span style=color:#ff79c6>-</span>l1);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>        padding: <span style=color:#8be9fd;font-style:italic>var</span>(<span style=color:#ff79c6>--</span>card<span style=color:#ff79c6>-</span>padding);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    .waline<span style=color:#ff79c6>-</span>container .vcount {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>        color: <span style=color:#8be9fd;font-style:italic>var</span>(<span style=color:#ff79c6>--</span>card<span style=color:#ff79c6>-</span>text<span style=color:#ff79c6>-</span>color<span style=color:#ff79c6>-</span>main);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>&lt;<span style=color:#ff79c6>/</span>style&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>{{<span style=color:#ff79c6>-</span> with .Site.Params.comments.waline <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>{{<span style=color:#ff79c6>-</span> $config <span style=color:#ff79c6>:=</span> dict <span style=color:#f1fa8c>&#34;el&#34;</span> <span style=color:#f1fa8c>&#34;#waline&#34;</span> <span style=color:#f1fa8c>&#34;dark&#34;</span> <span style=color:#f1fa8c>`html[data-scheme=&#34;dark&#34;]`</span> <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>{{<span style=color:#ff79c6>-</span> $replaceKeys <span style=color:#ff79c6>:=</span> dict <span style=color:#f1fa8c>&#34;serverurl&#34;</span> <span style=color:#f1fa8c>&#34;serverURL&#34;</span> <span style=color:#f1fa8c>&#34;requiredmeta&#34;</span> <span style=color:#f1fa8c>&#34;requiredMeta&#34;</span> <span style=color:#f1fa8c>&#34;wordlimit&#34;</span> <span style=color:#f1fa8c>&#34;wordLimit&#34;</span> <span style=color:#f1fa8c>&#34;pagesize&#34;</span> <span style=color:#f1fa8c>&#34;pageSize&#34;</span> <span style=color:#f1fa8c>&#34;avatarcdn&#34;</span> <span style=color:#f1fa8c>&#34;avatarCDN&#34;</span> <span style=color:#f1fa8c>&#34;avatarforce&#34;</span> <span style=color:#f1fa8c>&#34;avatarForce&#34;</span> <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>{{<span style=color:#ff79c6>-</span> <span style=color:#ff79c6>range</span> $key, $val <span style=color:#ff79c6>:=</span> . <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>    {{<span style=color:#ff79c6>-</span> <span style=color:#ff79c6>if</span> $val <span style=color:#ff79c6>-</span>}}  
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>        {{<span style=color:#ff79c6>-</span> $replaceKey <span style=color:#ff79c6>:=</span> index $replaceKeys $key <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>        {{<span style=color:#ff79c6>-</span> $k <span style=color:#ff79c6>:=</span> <span style=color:#ff79c6>default</span> $key $replaceKey <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>        {{<span style=color:#ff79c6>-</span> $config = merge $<span style=color:#50fa7b>config</span> (dict $k $val) <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>    {{<span style=color:#ff79c6>-</span> end <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>{{<span style=color:#ff79c6>-</span> end <span style=color:#ff79c6>-</span>}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>&lt;script&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>    <span style=color:#6272a4>/// Waline client configuration see: https://waline.js.org/en/reference/client.html
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span><span style=color:#6272a4></span>    new <span style=color:#50fa7b>Waline</span>({{ $config | jsonify | safeJS }});
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>&lt;<span style=color:#ff79c6>/</span>script&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>{{<span style=color:#ff79c6>-</span> end <span style=color:#ff79c6>-</span>}}
</span></span></code></pre></div><p>å°†ç¬¬ä¸€è¡Œä¿®æ”¹ä¸º<code>&lt;script src='//cdn.jsdelivr.net/gh/skybbx/img/waline/Waline.min.js'>&lt;/script></code>å³å¯ï¼Œæ›´å¤šå¼•ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href=https://waline.js.org/guide/client/import.html target=_blank rel=noopener>å¼•å…¥å®¢æˆ·ç«¯ | Waline</a>ã€‚<p>å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·åªéœ€ä¿®æ”¹è¿™ä¸ªæ˜µç§°å­—ç¬¦åˆ¤å®šï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨æˆ‘ä¿®æ”¹åçš„å®¢æˆ·ç«¯ã€‚<p>CDNåœ°å€ä¸ºï¼š<a href=https://cdn.jsdelivr.net/gh/skybbx/img/waline/ target=_blank rel=noopener>https://cdn.jsdelivr.net/gh/skybbx/img/waline/</a><h2 id=gravatarå¤´åƒ>Gravatarå¤´åƒ</h2><p>Gravatarç”±äºè¢«qiangçš„å…³ç³»ï¼Œä¸€ç›´ä»¥æ¥æˆ‘éƒ½æ˜¯ä½¿ç”¨æå®¢CDNçš„ä»£ç†ï¼Œè¡¨ç°å¾ˆç¨³å®šï¼Œå¯æœ€è¿‘è¿™ä¸¤å¤©å´å‘ç°å¼€å§‹å‡ºé—®é¢˜äº†ï¼Œç»å¸¸å‡ºç°åŠ è½½ä¸äº†çš„æƒ…å†µã€‚å¥½åœ¨è¿™ç§ä»£ç†æœ‰å¾ˆå¤šå¤§ä½¬åœ¨åšï¼Œæ—¢ç„¶ä¸ç¨³å®šå°±æ¢ä¸€ä¸ªå§ã€‚è¿™æ¬¡çœ‹ä¸­çš„æ˜¯è€åºåšçš„ä»£ç†ã€‚ä¼ é€é—¨ï¼š<a href=https://blog.loli.top/archives/1023.html target=_blank rel=noopener>è‡ªå»ºGravatarå›½å†…+å…¨çƒé•œåƒåŠ é€ŸæœåŠ¡ | åŸå—æ—§äº‹ (loli.top)</a><h3 id=walineä¸Šæ›´æ¢å¤´åƒcdn>Walineä¸Šæ›´æ¢å¤´åƒCDN</h3><p>å› ä¸ºWalineä¸ŠGravatarå¤´åƒé»˜è®¤çš„CDNå°±æ˜¯æå®¢çš„ï¼Œä¿®æ”¹æ–¹æ³•å¾ˆç®€å•ï¼ŒæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£â€”â€”<a href=https://waline.js.org/reference/client.html target=_blank rel=noopener>å‰ç«¯é…ç½® | Waline</a>ï¼Œå®šä¹‰ä¸€ä¸ªé…ç½®<code>avatarCDN</code>å³å¯ã€‚æ¡ˆä¾‹ï¼š<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>&lt;script src=<span style=color:#f1fa8c>&#34;//cdn.jsdelivr.net/gh/skybbx/img/waline/Waline.min.js&#34;</span>&gt;&lt;<span style=color:#ff79c6>/</span>script&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>&lt;div id=<span style=color:#f1fa8c>&#34;waline&#34;</span>&gt;&lt;<span style=color:#ff79c6>/</span>div&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>&lt;script&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  new <span style=color:#50fa7b>Waline</span>({
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    el: &#39;#waline&#39;,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    serverURL: &#39;å®¢æˆ·ç«¯åœ°å€&#39;,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    copyright: <span style=color:#ff79c6>true</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    requiredMeta: [&#39;nick&#39;, &#39;mail&#39;],
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    avatarCDN: &#39;https:<span style=color:#6272a4>//gravatar.loli.top/avatar/&#39;,
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#6272a4></span>  });
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>&lt;<span style=color:#ff79c6>/</span>script&gt;
</span></span></code></pre></div><p>å¦ï¼šå¯ä»¥ç”¨<code>{ $config | jsonify | safeJS }</code>å°†å‰ç«¯çš„é…ç½®é›†æˆåˆ°Configé‡Œã€‚<h3 id=wordpressä¸Šæ›´æ¢å¤´åƒcdn>Wordpressä¸Šæ›´æ¢å¤´åƒCDN</h3><p>å°†ä¸‹é¢ä»£ç†æ·»åŠ åˆ°ä¸»é¢˜çš„functions.phpå³å¯ã€‚<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#6272a4>// gravatarä½¿ç”¨ CDN
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#6272a4></span><span style=color:#ff79c6>function</span> <span style=color:#50fa7b>replace_gravatar</span>(<span style=color:#8be9fd;font-style:italic>$avatar</span>) {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#8be9fd;font-style:italic>$avatar</span> <span style=color:#ff79c6>=</span> str_replace(<span style=color:#ff79c6>array</span>(<span style=color:#f1fa8c>&#34;//gravatar.com/&#34;</span>, <span style=color:#f1fa8c>&#34;//secure.gravatar.com/&#34;</span>, <span style=color:#f1fa8c>&#34;//www.gravatar.com/&#34;</span>, <span style=color:#f1fa8c>&#34;//0.gravatar.com/&#34;</span>, 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#f1fa8c>&#34;//1.gravatar.com/&#34;</span>, <span style=color:#f1fa8c>&#34;//2.gravatar.com/&#34;</span>, <span style=color:#f1fa8c>&#34;//cn.gravatar.com/&#34;</span>), <span style=color:#f1fa8c>&#34;//gravatar.loli.top/&#34;</span>, <span style=color:#8be9fd;font-style:italic>$avatar</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$avatar</span>;}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>add_filter( <span style=color:#f1fa8c>&#39;get_avatar&#39;</span>, <span style=color:#f1fa8c>&#39;replace_gravatar&#39;</span> );
</span></span></code></pre></div></div><div class="content-tags ahover"><ul><li><a href=/tags/hugo>#hugo</a><li><a href=/tags/waline>#waline</a><li><a href=/tags/stack>#stack</a><li><a href=/tags/jsdelivr>#jsdelivr</a><li><a href=/tags/cdn>#cdn</a><li><a href=/tags/nodejs>#nodejs</a><li><a href=/tags/gravatar>#gravatar</a><li><a href=/tags/npm>#npm</a><li><a href=/tags/wordpress>#Wordpress</a></ul></div><nav class=post-nav><a class=prev href=/archives/dsm7-transmission-chinese/><i class="fa fa-chevron-left" aria-hidden=true></i>
<span class="prev-text nav-default">DSM7å®‰è£…Transmissionä¸å‡çº§ä¸­æ–‡ç•Œé¢</span>
<span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span></a>
<a class=next href=/archives/keep-learning-hugo/><span class="next-text nav-default">ç»§ç»­æŠ˜è…¾Hugo</span>
<span class="prev-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
<i class="fa fa-chevron-right" aria-hidden=true></i></a></nav><div class=content-footer><script src=https://unpkg.com/@waline/client@v2/dist/waline.js></script>
<link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><div id=waline class=waline-container></div><style>:root{--waline-font-size:1rem;--waline-theme-color:rgba(0,0,0,0.7);--waline-active-color:#202020;--waline-badge-color:rgba(0,0,0,0.9)}.wl-power{display:none}.wl-emoji{width:1rem}.wl-card .wl-badge{display:inline-block;margin-right:1em;padding:0;border:0 solid var(--waline-badge-color);border-radius:0;color:var(--waline-badge-color);font-size:var(--waline-badge-font-size)}</style><script>Waline.init({avatarCDN:"https://sdn.geekzu.org/avatar/",dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.qylao.com/emojis/weibo"],lang:"zh-cn",locale:{admin:"ğŸ–Š"},placeholder:"åœ¨è¿™é‡Œåˆ†äº«æ‚¨çš„è§‚ç‚¹ä¸æƒ³æ³•ï¼Œæ˜µç§°ã€é‚®ç®±å¿…å¡«ï¼Œé‚®ä»¶é€šçŸ¥å›å¤ã€‚",requiredMeta:["nick","mail"],serverURL:"https://comments.iamlm.com/",visitor:!0})</script></div></div></div></div><script src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script>
<script defer src="data:application/javascript,var%20styleAuthorUrl=%60%0D%0Acolor:%20rgb(248,248,255);%0D%0Abackground-color:%20%238B8989;%0D%0Apadding:%205px%2010px;%0D%0Aborder-radius:%205px;%0D%0A%60,authorUrl=%22laomai.org%22;console.log(%60%25c$%7BauthorUrl%7D%60,styleAuthorUrl),window.loadphotoswipejs%26%26window.alert(%22You've%20loaded%20load-photoswipe.js%20twice.%20See%20https://github.com/liwenyip/hugo-easy-gallery/issues/6%22);var%20loadphotoswipejs=1;$(document).ready(function()%7Bvar%20items=%5B%5D;$(%22.post-content%20p%20%3E%20img,%20figure%22).each(function()%7Bvar%20$this=$(this),$a,$img,$src,$title,$msrc;if($this.attr(%22class%22)==%22no-photoswipe%22)return!0;if($this%5B0%5D.tagName===%22IMG%22?($src=$this%5B0%5D.src,$msrc=$this%5B0%5D.src,$title=$this%5B0%5D.alt):($a=$this.find(%22a%22),$img=$this.find(%22img%22),$src=$a.attr(%22href%22),$title=$img.attr(%22alt%22),$msrc=$img.attr(%22src%22)),$a%26%26$a.data(%22size%22))var%20$size=$a.data(%22size%22).split(%22x%22),item=%7Bsrc:$src,w:$size%5B0%5D,h:$size%5B1%5D,title:$title,msrc:$msrc%7D;else%7Bvar%20item=%7Bsrc:$src,w:800,h:600,title:$title,msrc:$msrc%7D,img=new%20Image;img.src=$src;var%20wait=setInterval(function()%7Bvar%20w=img.naturalWidth,h=img.naturalHeight;w%26%26h%26%26(clearInterval(wait),item.w=w,item.h=h)%7D,30)%7Dvar%20index=items.length;items.push(item),$this.on(%22click%22,function(event)%7Bevent.preventDefault();var%20$pswp=$(%22.pswp%22)%5B0%5D,options=%7Bindex,bgOpacity:.8,showHideOpacity:!0%7D;new%20PhotoSwipe($pswp,PhotoSwipeUI_Default,items,options).init()%7D)%7D)%7D)"></script>