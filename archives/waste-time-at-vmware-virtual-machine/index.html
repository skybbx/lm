<!doctype html><html lang=zh-cn><meta charset=utf-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=preconnect href=https://cdn.qylao.com><link rel=preconnect href=https://cdn.staticfile.org><meta http-equiv=x-dns-prefetch-control content="on"><link rel=dns-prefetch href=//cdn.qylao.com><link rel=dns-prefetch href=//cdn.staticfile.org><title>白忙活篇之VMware虚拟机</title><meta name=description content="一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！"><meta name=author content="老麦"><link rel=stylesheet href=https://iamlm.com/scss/laomai.min.d794b1c7a4a7f95bd4146bdc97829cd6fe17fd4c83f582133c93df935ba84f9c.css integrity="sha256-15Sxx6Sn+VvUFGvcl4Kc1v4X/UyD9YITPJPfk1uoT5w=" rel="preload stylesheet" as=style><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><body style=background:url(https://cdn.qylao.com/wp-content/uploads/2022/04/sea-gc05b59c74_1920.jpg);background-size:cover;background-attachment:fixed><div class=container><div class=main-container><div class=tabs-main><input type=checkbox id=menu-btn>
<label for=menu-btn class=menu-icon><i class="fa fa-bars" aria-hidden=true></i></label><div class=main-header><div class=logo><img src=https://cdn.qylao.com/wp-content/uploads/2021/04/apple-touch-icon.png alt=老麦></div><div class=logo-con><p>一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！</div><div class=line1></div></div><div class=menu><ul class=tabs><li class=menu-item><a href=/>首页</a><li class=menu-item><a href=/archives/>文章</a><li class=menu-item><a href=/about/>关于</a><li class=menu-item><a href=/links/>友链</a></ul></div><div class=main-footer><p>&copy;2022老麦</p><span>已记录<span>124904</span>个字</span></div></div><div class=main-content><div class=content-header><h1>白忙活篇之VMware虚拟机</h1></div><div class=line2><div class=post-time><time datetime=2022-08-07T00:00:00>2022-08-07</time></div></div><div class="content ahover"><p>由于各种各样的原因导致七月中旬后就突然忙碌了起来，连续加班工作了二十天。果然，“加班”使我快乐。<p>家里的神兽去了祸害他们的外婆与姑姑，直接导致这个周末家里反倒变得清静了下来。老婆今天还要回店里忙活，家里就剩自己一个，没啥事做就继续尝试安装虚拟机吧。<p>M1的MacOS安装虚拟机我是真的服，这段时间间续的尝试了很多次都未能成功。对了，因为VMware Fusion Player<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>可以免费使用，新电脑的虚拟机方案就选择了它。可万万没想到的是这就是个巨坑，下载了很多个系统镜像都无法顺利完成安装。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>EFI stub: Booting Linux Kernel.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>EFI stub: EFI_RNG_PROTOCOL unavailable, no randomness supplied
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>EFI stub: Using DIB from configuration table
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>EFI stub: Exiting boot services and installing virtual address map...
</span></span></code></pre></div><p>根据我有限的理解就是因为Linux内核的关系导致虚拟机启动不了。<p><picture><source srcset=/archives/waste-time-at-vmware-virtual-machine/image-20220801144334778_hu7ab695078fa98f60844c0d8b0729d08c_119823_800x0_resize_q75_h2_lanczos_3.webp loading=lazy type=image/webp alt=image-20220801144334778><img src=/image-20220801144334778.png loading=lazy alt=image-20220801144334778></picture><p>在尝试了个不知多少个系统后，<strong>终于终于终于</strong>使用<strong>ubuntu-20.04.2-live-server-arm64.iso</strong><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>这个镜像成功启动了虚拟机，有了第一次成功启动，后面的事情就变得顺理成章了。知道是因为Linux内核的关系才导致VMWare Fusion无法成功启动虚拟机，所以使用上面的镜像成功启动Ubuntu虚拟机第一件要做的事情就是进入Ubuntu系统里锁住Linux内核的版本，不能让系统自动更新内核，要不然虚拟机关机后重新启动还是会出现如上图的提示。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#6272a4># 查看已安装内核</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>dpkg --get-selections |grep linux-image
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#6272a4># root@ubuntu:~/data/Artalk/ArtalkGo# dpkg --get-selections |grep linux-image</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#6272a4># linux-image-5.4.0-65-generic			hold</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#6272a4># linux-image-generic				hold</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#6272a4># 显示hold是因为我已经将内核锁住了，没锁前hold这显示install</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#6272a4># 查看正在使用的内核</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>uname -a
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#6272a4># 关闭内核自动更新</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#6272a4># sudo apt-mark hold linux-image-&lt;内核版本&gt;-generic</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>sudo apt-mark hold linux-image-5.4.0-65-generic
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#6272a4># 保险起见，将不带版本号的内核也锁住</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>sudo apt-mark hold linux-image-generic
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#6272a4># 如果以后VMware Fusion更新了，可以重新解锁内核更新</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>sudo apt-mark unhold linux-image-5.4.0-65-generic
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>sudo apt-mark unhold linux-image-generic
</span></span></code></pre></div><p>经过这次折腾，深深的觉得对于现在的我来说花钱买服务来得更加实际。由于M1芯片的关系，即便现在MacOS上软件的适配做得还不错，但还是会有不足之处。就拿VMware Fusion来说吧，对比Parallels Desktop 17差得不是一点半点，同样是安装Linux–arm64，Parallels Desktop 17则是如丝般顺滑，绝不会出现因为内核的关系导致虚拟机无法启动。<p>其次Parallels Desktop 17最大的功能应该是安装Windows，在MacOS上玩游戏。我在14天试用期期间的体验只有一个词，「丝滑」。如果不是我在VMWare Fusion上将虚拟机启动成功了，估计也会为Parallels Desktop 17埋单。但老实说，这货的价格着实有点高，如果想拥有最好的使用体验还必须是订阅制。暂时我还用不上这些需求，我现在的需求只是需要启动几个Linux主机就好，所以VMware Fusion就能满足我了。<p>这篇笔记昨天就写好了，准备更新时我在B站上刚好看到一个视频说 VMware Fusion<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> 更新了，可以安装Win11-Arm，我就更新测试了一下。果然，新版本已经解决由于Linux内核的原因无法正确安装虚拟的问题，虽然只是测试了Debian 11，使用<strong>debian-11.4.0-arm64-DVD-1.iso</strong><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>这个镜像。至于Windows虚拟机我没有测试，这个不在我的需求范围内。<p><picture><source srcset=/archives/waste-time-at-vmware-virtual-machine/image-20220807171634778_hu36072e19413b53c9e4d917673cb4d50c_340916_800x0_resize_q75_h2_lanczos_3.webp loading=lazy type=image/webp alt=image-20220807171634778><img src=/image-20220807171634778.png loading=lazy alt=image-20220807171634778></picture><p>虽然这篇笔记的内容已经过时，但我还是决定更新了，就算对别人来说没有帮助，但这毕竟是我折腾的一个过程，对于我来说这份笔记还是有存在的价值的，毕竟这是我浪费生命的又一代表作。<p>对了，VMware Fusion Player –Personal Use License 申请地址为：<p><a href="https://customerconnect.vmware.com/web/vmware/evalcenter?p=fusion-player-personal" target=_blank rel=noopener>https://customerconnect.vmware.com/web/vmware/evalcenter?p=fusion-player-personal </a>，<p>如果点击进去后跳转到VMware国内节点的话，点击页面右上角导航栏的小地球切换语言为 <strong>US</strong> 后重新进入上面这个地址即可。<p>END.<div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=FUS-PUBTP-2021H1" target=_blank rel=noopener>https://customerconnect.vmware.com/downloads/get-download?downloadGroup=FUS-PUBTP-2021H1</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a><li id=fn:2><p><a href=https://cdimage.ubuntu.com/releases/20.04.2/release/ubuntu-20.04.2-live-server-arm64.iso target=_blank rel=noopener>https://cdimage.ubuntu.com/releases/20.04.2/release/ubuntu-20.04.2-live-server-arm64.iso</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a><li id=fn:3><p><a href="https://customerconnect.vmware.com/cn/downloads/get-download?downloadGroup=FUS-PUBTP-22H2" target=_blank rel=noopener>https://customerconnect.vmware.com/cn/downloads/get-download?downloadGroup=FUS-PUBTP-22H2</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a><li id=fn:4><p><a href=https://cdimage.debian.org/debian-cd/current/arm64/iso-dvd/debian-11.4.0-arm64-DVD-1.iso target=_blank rel=noopener>https://cdimage.debian.org/debian-cd/current/arm64/iso-dvd/debian-11.4.0-arm64-DVD-1.iso</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></ol></div></div><div class="content-tags ahover"><ul><li><a href=/tags/vmware-fusion>#VMware Fusion</a><li><a href=/tags/linux>#Linux</a><li><a href=/tags/macos>#MacOS</a><li><a href=/tags/ubuntu>#Ubuntu</a><li><a href=/tags/debian>#Debian</a><li><a href=/tags/parallels-desktop>#Parallels Desktop</a><li><a href=/tags/windows>#Windows</a><li><a href=/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA>#虚拟机</a></ul></div><nav class=post-nav><a class=prev href=/archives/tossing-record-batch-renaming/><i class="fa fa-chevron-left" aria-hidden=true></i>
<span class="prev-text nav-default">「折腾记录」批量重命名</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/archives/this-is-a-running-account-01/><span class="next-text nav-default">这是一篇流水账-01</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class="fa fa-chevron-right" aria-hidden=true></i></a></nav><div class=content-footer></div></div></div></div><script src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script>
<script defer src="data:application/javascript,var%20styleAuthorUrl=%60%0D%0Acolor:%20rgb(248,248,255);%0D%0Abackground-color:%20%238B8989;%0D%0Apadding:%205px%2010px;%0D%0Aborder-radius:%205px;%0D%0A%60,authorUrl=%22laomai.org%22;console.log(%60%25c$%7BauthorUrl%7D%60,styleAuthorUrl),window.loadphotoswipejs%26%26window.alert(%22You've%20loaded%20load-photoswipe.js%20twice.%20See%20https://github.com/liwenyip/hugo-easy-gallery/issues/6%22);var%20loadphotoswipejs=1;$(document).ready(function()%7Bvar%20items=%5B%5D;$(%22.post-content%20p%20%3E%20img,%20figure%22).each(function()%7Bvar%20$this=$(this),$a,$img,$src,$title,$msrc;if($this.attr(%22class%22)==%22no-photoswipe%22)return!0;if($this%5B0%5D.tagName===%22IMG%22?($src=$this%5B0%5D.src,$msrc=$this%5B0%5D.src,$title=$this%5B0%5D.alt):($a=$this.find(%22a%22),$img=$this.find(%22img%22),$src=$a.attr(%22href%22),$title=$img.attr(%22alt%22),$msrc=$img.attr(%22src%22)),$a%26%26$a.data(%22size%22))var%20$size=$a.data(%22size%22).split(%22x%22),item=%7Bsrc:$src,w:$size%5B0%5D,h:$size%5B1%5D,title:$title,msrc:$msrc%7D;else%7Bvar%20item=%7Bsrc:$src,w:800,h:600,title:$title,msrc:$msrc%7D,img=new%20Image;img.src=$src;var%20wait=setInterval(function()%7Bvar%20w=img.naturalWidth,h=img.naturalHeight;w%26%26h%26%26(clearInterval(wait),item.w=w,item.h=h)%7D,30)%7Dvar%20index=items.length;items.push(item),$this.on(%22click%22,function(event)%7Bevent.preventDefault();var%20$pswp=$(%22.pswp%22)%5B0%5D,options=%7Bindex,bgOpacity:.8,showHideOpacity:!0%7D;new%20PhotoSwipe($pswp,PhotoSwipeUI_Default,items,options).init()%7D)%7D)%7D)"></script>