<!doctype html><html lang=zh-cn><meta charset=utf-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=preconnect href=https://cdn.qylao.com><link rel=preconnect href=https://cdn.staticfile.org><meta http-equiv=x-dns-prefetch-control content="on"><link rel=dns-prefetch href=//cdn.qylao.com><link rel=dns-prefetch href=//cdn.staticfile.org><title>投奔Hugo和主题的相关修改</title><meta name=description content="一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！"><meta name=author content="老麦"><link rel=stylesheet href=https://iamlm.com/scss/laomai.min.d794b1c7a4a7f95bd4146bdc97829cd6fe17fd4c83f582133c93df935ba84f9c.css integrity="sha256-15Sxx6Sn+VvUFGvcl4Kc1v4X/UyD9YITPJPfk1uoT5w=" rel="preload stylesheet" as=style><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><body style=background:url(https://cdn.qylao.com/wp-content/uploads/2022/04/sea-gc05b59c74_1920.jpg);background-size:cover;background-attachment:fixed><div class=container><div class=main-container><div class=tabs-main><input type=checkbox id=menu-btn>
<label for=menu-btn class=menu-icon><i class="fa fa-bars" aria-hidden=true></i></label><div class=main-header><div class=logo><img src=https://cdn.qylao.com/wp-content/uploads/2021/04/apple-touch-icon.png alt=老麦></div><div class=logo-con><p>一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！</div><div class=line1></div></div><div class=menu><ul class=tabs><li class=menu-item><a href=/>首页</a><li class=menu-item><a href=/archives/>文章</a><li class=menu-item><a href=/about/>关于</a><li class=menu-item><a href=/links/>友链</a></ul></div><div class=post-toc><nav id=TableOfContents><ol><li><ol><li><a href=#写在前面>写在前面</a><li><a href=#相关修改>相关修改</a><li><a href=#最后>最后</a></ol></ol></nav></div><div class=main-footer><p>&copy;2022老麦</p><span>已记录<span>124904</span>个字</span></div></div><div class=main-content><div class=content-header><h1>投奔Hugo和主题的相关修改</h1></div><div class=line2><div class=post-time><time datetime=2020-08-08T17:50:23>2020-08-08</time></div></div><div class="content ahover"><h3 id=写在前面>写在前面</h3><hr><p>重启博客时选择了Hexo这个静态博客生成工具，毕竟容易上手。当时没有选择Hugo的原因是没有喜欢的主题，没想到前段时间将Hexo换成Hugo也是因为主题。<p>我比较喜欢简约一点的主题，无意中看到Jane这个Hugo主题就喜欢上了。布局，样式各个方面都很合我口味，所以就毅然的投奔到Hugo的怀抱。在此感谢贤民老师把主题分享出来，也在这立个flag吧，<strong>未来三年不再折腾主题。</strong><h3 id=相关修改>相关修改</h3><hr><p>虽然Jane这个主题各方面都已经很完善了，但还是有几个我个人比较不怎么喜欢的点。<ol><li>LOGO的字体；</ol><p>老实说到现在我都还没有完全弄明白Hugo的CSS样式是怎么打包的，哈哈哈。没学过，没接触过，在百度上也搜不到多少有用的信息。按我的理解就是修改，jane\assets\sass\ _variables.scss<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>//</span> <span style=color:#ff79c6>Font</span> <span style=color:#ff79c6>family</span> <span style=color:#ff79c6>of</span> <span style=color:#ff79c6>the</span> <span style=color:#ff79c6>logo</span><span style=color:#ff79c6>.</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6>$</span><span style=color:#ff79c6>logo-font-family</span><span style=color:#ff79c6>:</span> <span style=color:#ff79c6>Athelas</span><span style=color:#ff79c6>,</span> <span style=color:#ff79c6>STHeiti</span><span style=color:#ff79c6>,</span> <span style=color:#ff79c6>Microsoft</span> <span style=color:#ff79c6>Yahei</span><span style=color:#ff79c6>,</span> <span style=color:#ff79c6>serif</span> <span style=color:#ff79c6>!</span><span style=color:#ff79c6>default</span><span style=color:#ff79c6>;</span>
</span></span></code></pre></div><p>可我发现修改后完全没效果。在网上搜了一下，主题的CSS样式打包处理过。这我就完全不明白了，直接懵掉。改一个LOGO的字体就把我难倒了，你说知识是多么的重要呢！<p>又研究了一下，发现jane\resources_gen\assets\scss\sass\jane.scss_48b060fe05b0a273d182ef83c0605941.content这个文件应该就是打包后的主题样式了，找到.logo{}，修改font-family。保存，问题又来了，样式直接报错。说什么完整性，我也忘了相关的提示是什么了。<strong>难啊</strong>！怎么改个字体都这么的难？你说知识是多么的重要呢！没知识太可怕。<p>又在网上找相关的解决方案，能找到的资料真的很有限，大部分的原因也许是因为我连问题出在哪都不清楚，一次又一次的尝试与摸索。发现相同目录下<strong>jane.scss_48b060fe05b0a273d182ef83c0605941.json</strong>这个文件里面有个sha256，难道<strong>jane.scss_48b060fe05b0a273d182ef83c0605941.content</strong>这个主题样式还加密过的？试着把Integrity里面的值删掉，刷新了一下。LOGO的字体已经改成我要的样子了。具体为什么我也不懂。<ol start=2><li>搜索功能；</ol><p>主题用的是google的搜索功能，国内使用不了。自己添加过algolia，使用起来也挺方便的，但碍于我不会将algolia融入到主题里，只是简单的放到header.html。<p><picture><source srcset=/2020/post-14/2020-08-08-164306_hu55e85277323c36dd908b101a86b7d505_4998_800x0_resize_q75_h2_lanczos_2.webp loading=lazy type=image/webp alt><img src=/2020-08-08-164306.webp loading=lazy alt></picture><p>太丑，我不喜欢。<ol start=3><li>修复错误；</ol><p>将public目录的文档上载到虚拟主机或推到github仓库时会出现一个错误提示，造成的原因是操作系统间的换行符，CRLF，LF导致本地文件与服务器上的文件大小不一样。解决方法：jane\static\目录下新建.gitattributes文件，里面添加下面代码<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>*</span>.js <span style=color:#ff79c6>-</span>text
</span></span></code></pre></div><p>再就是关于浏览器检查元素时提示的警告，这个不修复也不影响使用。<p><picture><source srcset=/2020/post-14/2020-08-08-172826_hu92d0d76b08a6e712b056f7f2b7d13878_15602_800x0_resize_q75_h2_lanczos_2.webp loading=lazy type=image/webp alt><img src=/2020-08-08-172826.webp loading=lazy alt></picture><p>为事件侦听器添加一个passive标志警告就没了。修改\jane\static\lib\slideout\slideout-1.0.1.min.js，搜索addEventListener，在每个addEventListener后面的括号添加{passive: true}。例如<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>addEventListener(f.move,<span style=color:#ff79c6>this</span>._preventMove);
</span></span></code></pre></div><p>修改为<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>addEventListener(f.move,<span style=color:#ff79c6>this</span>._preventMove, {passive<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>true</span>});
</span></span></code></pre></div><ol start=4><li>关于页脚</ol><p>因为我在页脚里填入了相关的备案信息，如果再放入主题的相关链接会显得不怎么好看，所以就修改了页脚，已经在关于页面做了相应的说明。希望贤民老师可以理解。<h3 id=最后>最后</h3><hr><p>至此，我对现在的主题已经很满意了。</div><div class="content-tags ahover"><ul><li><a href=/tags/hugo>#hugo</a><li><a href=/tags/hexo>#hexo</a><li><a href=/tags/jane>#jane</a><li><a href=/tags/logo>#logo</a><li><a href=/tags/%E5%AD%97%E4%BD%93>#字体</a><li><a href=/tags/passive>#passive</a><li><a href=/tags/slideout>#slideout</a><li><a href=/tags/github>#github</a><li><a href=/tags/git>#git</a></ul></div><nav class=post-nav><a class=prev href=/2020/post-15/><i class="fa fa-chevron-left" aria-hidden=true></i>
<span class="prev-text nav-default">家庭日，和孩子们出去爬山玩水。</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/2020/post-13/><span class="next-text nav-default">记录在万国觉醒KVK3失败之际</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class="fa fa-chevron-right" aria-hidden=true></i></a></nav><div class=content-footer><script src=https://unpkg.com/@waline/client@v2/dist/waline.js></script>
<link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><div id=waline class=waline-container></div><style>:root{--waline-font-size:1rem;--waline-theme-color:rgba(0,0,0,0.7);--waline-active-color:#202020;--waline-badge-color:rgba(0,0,0,0.9)}.wl-power{display:none}.wl-emoji{width:1rem}.wl-card .wl-badge{display:inline-block;margin-right:1em;padding:0;border:0 solid var(--waline-badge-color);border-radius:0;color:var(--waline-badge-color);font-size:var(--waline-badge-font-size)}</style><script>Waline.init({avatarCDN:"https://sdn.geekzu.org/avatar/",dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.qylao.com/emojis/weibo"],lang:"zh-cn",locale:{admin:"🖊"},placeholder:"在这里分享您的观点与想法，昵称、邮箱必填，邮件通知回复。",requiredMeta:["nick","mail"],serverURL:"https://comments.iamlm.com/",visitor:!0})</script></div></div></div></div><script src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script>
<script defer src="data:application/javascript,var%20styleAuthorUrl=%60%0D%0Acolor:%20rgb(248,248,255);%0D%0Abackground-color:%20%238B8989;%0D%0Apadding:%205px%2010px;%0D%0Aborder-radius:%205px;%0D%0A%60,authorUrl=%22laomai.org%22;console.log(%60%25c$%7BauthorUrl%7D%60,styleAuthorUrl),window.loadphotoswipejs%26%26window.alert(%22You've%20loaded%20load-photoswipe.js%20twice.%20See%20https://github.com/liwenyip/hugo-easy-gallery/issues/6%22);var%20loadphotoswipejs=1;$(document).ready(function()%7Bvar%20items=%5B%5D;$(%22.post-content%20p%20%3E%20img,%20figure%22).each(function()%7Bvar%20$this=$(this),$a,$img,$src,$title,$msrc;if($this.attr(%22class%22)==%22no-photoswipe%22)return!0;if($this%5B0%5D.tagName===%22IMG%22?($src=$this%5B0%5D.src,$msrc=$this%5B0%5D.src,$title=$this%5B0%5D.alt):($a=$this.find(%22a%22),$img=$this.find(%22img%22),$src=$a.attr(%22href%22),$title=$img.attr(%22alt%22),$msrc=$img.attr(%22src%22)),$a%26%26$a.data(%22size%22))var%20$size=$a.data(%22size%22).split(%22x%22),item=%7Bsrc:$src,w:$size%5B0%5D,h:$size%5B1%5D,title:$title,msrc:$msrc%7D;else%7Bvar%20item=%7Bsrc:$src,w:800,h:600,title:$title,msrc:$msrc%7D,img=new%20Image;img.src=$src;var%20wait=setInterval(function()%7Bvar%20w=img.naturalWidth,h=img.naturalHeight;w%26%26h%26%26(clearInterval(wait),item.w=w,item.h=h)%7D,30)%7Dvar%20index=items.length;items.push(item),$this.on(%22click%22,function(event)%7Bevent.preventDefault();var%20$pswp=$(%22.pswp%22)%5B0%5D,options=%7Bindex,bgOpacity:.8,showHideOpacity:!0%7D;new%20PhotoSwipe($pswp,PhotoSwipeUI_Default,items,options).init()%7D)%7D)%7D)"></script>