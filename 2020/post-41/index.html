<!doctype html><html lang=zh-cn><meta charset=utf-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=preconnect href=https://cdn.staticfile.org><meta http-equiv=x-dns-prefetch-control content="on"><link rel=dns-prefetch href=//cdn.staticfile.org><link rel=preload href=/font/notoserifsc-regular-webfont.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/font/merriweather-regular-webfont.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/font/notoserifsc-regular-webfont.woff as=font type=font/woff crossorigin><link rel=preload href=/font/merriweather-regular-webfont.woff as=font type=font/woff crossorigin><title>评论系统从valine转到twikoo</title><meta name=description content="一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！"><meta name=author content="老麦"><link rel=stylesheet href=https://iamlm.com/scss/laomai.min.4c176623d571d9383961057b1ba8c30acb0bd63d892801e0e3853ec471ba8169.css integrity="sha256-TBdmI9Vx2Tg5YQV7G6jDCssL1j2JKAHg44U+xHG6gWk=" rel="preload stylesheet" as=style><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><body style=background:url(https://cdn.qylao.com/wp-content/uploads/2022/04/sea-gc05b59c74_1920.jpg);background-size:cover;background-attachment:fixed><div class=container><div class=main-container><div class=tabs-main><input type=checkbox id=menu-btn>
<label for=menu-btn class=menu-icon><i class="fa fa-bars" aria-hidden=true></i></label><div class=main-header><div class=logo><img src=https://cdn.qylao.com/wp-content/uploads/2021/04/apple-touch-icon.png alt=老麦></div><div class=logo-con><p>一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！</div><div class=line1></div></div><div class=menu><ul class=tabs><li class=menu-item><a href=/>首页</a><li class=menu-item><a href=/archives/>文章</a><li class=menu-item><a href=/bb/>闲言</a><li class=menu-item><a href=/about/>关于</a><li class=menu-item><a href=/links/>友链</a></ul></div><div class=main-footer><p>&copy;2022老麦</p><span>已记录<span>111813</span>个字</span></div></div><div class=main-content><div class=content-header><h1>评论系统从valine转到twikoo</h1></div><div class=line2><div class=post-time><time datetime=2020-12-22T23:56:23>2020-12-22</time></div></div><div class="content ahover"><p>其实我想换评论系统有一段时间了，因为valine加载变得很慢，而且我知道的就有过三次抽风，一直无法把评论加载出来。但碍于一直没有找到喜欢的评论系统，就让它继续在边上凉着。<p>最近在逛博客圈时，看到<a href=https://immmmm.com/ target=_blank rel=noopener>林木木</a>大佬新启用的评论系统Twikoo，一看觉得还不错，就试着去<a href=https://twikoo.js.org/ target=_blank rel=noopener>官网</a>看了一下，此评论系统是选择部署在腾讯云——云开发 CloudBase上的，正所谓大树好乘凉，我也有了转投之心。想干就干~<p>跟着Twikoo中文文档一步步去进行相关的环境部署，简单且顺利，看得出作者@iMaeGoo_虹墨很用心，教程写得相当的易懂。不一会儿我就顺利的搭建完成了。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>&lt;<span style=color:#ff79c6>div</span> <span style=color:#50fa7b>id</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;tcomment&#34;</span>&gt;&lt;/<span style=color:#ff79c6>div</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>&lt;<span style=color:#ff79c6>script</span> <span style=color:#50fa7b>src</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;https://cdn.jsdelivr.net/npm/twikoo@0.4.1/dist/twikoo.all.min.js&#34;</span>&gt;&lt;/<span style=color:#ff79c6>script</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>&lt;<span style=color:#ff79c6>script</span>&gt;twikoo.init({ envId<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;您的环境id&#39;</span>, el<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;#tcomment&#39;</span> })&lt;/<span style=color:#ff79c6>script</span>&gt;
</span></span></code></pre></div><p>可当我将上面代码修改成我的环境ID后引入到Hugo时，却直接报错。直接懵掉，我记得我是完全按照教程来的，而且我自问自己也很注意细节的，所以这次报错真让我懵圈了，检查了两三次有没有输错函数名，环境ID之类的，无果，也确定了我的操作没有出错。<p>这时看到官网上有个QQ群的二围码，我也申请了进去，准备向人求教。没想到群里的大佬、小伙伴们如此热心，帮我出各种各样的主意，最后评论系统的作者还亲自一步一步帮我排查，下午几个小时里群里基本都在围绕我出现的这个问题在讨论，可惜最终我们也没有找到问题所在，但可以确定的是我部署的步骤是没有出错的。<p>最后因为我到点要去接两大神兽放学，讨论也就此结束。这里不禁多提一句，之前我接入valine上时也出现了部分评论只显示<code>[]</code>，自己研究无果后也加入了valine的QQ群，在上面请教了几次，却没有人理会我，也不知道是不是我乱入的姿势不对还是其他什么原因。总之跟这次的感觉差距太大了。<p>回到正题，接完孩子回家后我心不死，继续在Twikoo这个问题上纠结，回想了一下下午在群友交流的方案，当时有个小伙伴说有可能你遇到腾讯云——云开发 CloudBase的BUG了，当时我在想，死马当活马医吧，也许真就这个问题，于是把环境、云函数，数据库全删了，重新激活、重新部署。当然这波操作的结果显而易见，要是成功了也没接下来的事了。<p>不过回想到这里时，我心中就有了另一个想法，因为我确信自己没有操作错误，作者和群友也说教程是完全可以部署成功的，所以我想是不是我选择的这个“广州”节点出问题了，CloudBase上有两个节点，一个广州，一个上海，反正问题都这样了，不如去上海这个节点再建个环境部署试试，结果这一试，成了。<p>终于松了口气，折腾了一个下午，可算找到原因了，向作者反映了情况，他也没想到，他说，广州这个节点是12月17号才开放的，之前只有一个上海节点，所以就没往这个方面去想。他向腾讯的开发提问，得到的回复<code>cloudbase-js-sdk</code>上需添加地域参数，具体可查阅<a href=https://github.com/TencentCloudBase/cloudbase-js-sdk/issues/5 target=_blank rel=noopener>https://github.com/TencentCloudBase/cloudbase-js-sdk/issues/5</a><p>反正我是不懂了，<del>如果你也想使用Twikoo的话，记得选择上海的节点哦，不过我相信作者在下个版本更新肯定会修正这个问题的。</del><strong>作者在第二天的零晨就已经更新了版本，也修复了上述问题。点赞~</strong><p>既然我的问题解决了，接下就针对主题进行相应的样式修改吧。其实要修改的地方也不多，毕竟一眼讨喜的东西，我因为主题字体设置问题，才要稍微进行改动，相信一般的直接引用就可以了。<ol><li>在主题/layouts/partials/comments.html适当位置添加引用</ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>  &lt;<span style=color:#ff79c6>div</span> <span style=color:#50fa7b>class</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;post bg-white&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  &lt;<span style=color:#ff79c6>div</span> <span style=color:#50fa7b>id</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;tcomment&#34;</span>&gt;&lt;/<span style=color:#ff79c6>div</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>  &lt;<span style=color:#ff79c6>script</span> <span style=color:#50fa7b>src</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;https://cdn.jsdelivr.net/npm/twikoo@0.4.2/dist/twikoo.all.min.js&#34;</span>&gt;&lt;/<span style=color:#ff79c6>script</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>  &lt;<span style=color:#ff79c6>script</span>&gt;twikoo.init({ envId<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;环境ID&#39;</span>, region<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;ap-guangzhou&#39;</span>, el<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;#tcomment&#39;</span> })&lt;/<span style=color:#ff79c6>script</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>  &lt;/<span style=color:#ff79c6>div</span>&gt;
</span></span></code></pre></div><ol start=2><li>在主题/assets/sass/_partial/ _post/文件夹新建一个twikoo.scss</ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#6272a4>// ==============================
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#6272a4>// twikoo comment
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#6272a4>// ==============================
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#6272a4></span><span style=color:#50fa7b>.tk-comments-title</span> <span style=color:#ff79c6>span</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>20</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#50fa7b>.tk-action-link</span> <span style=color:#ff79c6>span</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>18</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#50fa7b>.OwO-logo</span> <span style=color:#ff79c6>svg</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>  <span style=color:#50fa7b>width</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>18</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  <span style=color:#50fa7b>height</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>18</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#50fa7b>.tk-action-icon</span> <span style=color:#ff79c6>svg</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>  <span style=color:#50fa7b>width</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>18</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>  <span style=color:#50fa7b>height</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>18</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#50fa7b>.tk-meta</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>16</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span><span style=color:#50fa7b>.tk-extra</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>12</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>  <span style=color:#50fa7b>font-family</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;EB Garamond&#39;</span><span style=color:#ff79c6>,</span><span style=color:#f1fa8c>&#39;Noto Serif SC&#39;</span><span style=color:#ff79c6>,</span>serif;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span><span style=color:#50fa7b>.tk-content</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>  <span style=color:#50fa7b>font-size</span><span style=color:#ff79c6>:</span> <span style=color:#bd93f9>16</span><span style=color:#8be9fd>px</span>;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span><span style=color:#50fa7b>.tk-footer</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>  <span style=color:#50fa7b>font-family</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;EB Garamond&#39;</span><span style=color:#ff79c6>,</span>serif;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>}
</span></span></code></pre></div><ol start=3><li>在主题/assets/sass/_partial/ _post.scss适当位置添加一行</ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>@import</span> <span style=color:#f1fa8c>&#39;_post/twikoo&#39;</span>;
</span></span></code></pre></div><p>至此修改完成，其实也就是简单地对相应的样式定义。以上记录只作为本人的笔记使用，用作预防以后自己忘记。请根据自己使用的主题进行定义你喜欢的样式。<p>最后将valine上的数据导入到Twikoo里，使用Twikoo官方提供的迁移脚本，轻易搞定。<p>Valine到Twikoo迁移脚本：<a href=https://github.com/imaegoo/twikoo-import-tools target=_blank rel=noopener>https://github.com/imaegoo/twikoo-import-tools</a></div><div class="content-tags ahover"><ul><li><a href=/tags/hugo>#Hugo</a><li><a href=/tags/jane>#Jane</a><li><a href=/tags/%E6%8A%98%E8%85%BE>#折腾</a></ul></div><nav class=post-nav><a class=prev href=/2020/post-42/><i class="fa fa-chevron-left" aria-hidden=true></i>
<span class="prev-text nav-default">「Typora」是真的香</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/2020/post-40/><span class="next-text nav-default">是金子就一定会发光</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class="fa fa-chevron-right" aria-hidden=true></i></a></nav><div class=content-footer><script src=//cdn.qylao.com/dist/Waline.min.js></script><div id=waline class=waline-container></div><style>:root{--waline-font-size:1rem;--waline-theme-color:rgba(0,0,0,0.7);--waline-active-color:#202020;--waline-badge-color:rgba(0,0,0,0.3)}.v[data-class=v] .vcard .vhead .vnick svg{display:none}.v[data-class=v] .vpower{display:none}.wl-emoji{width:1rem}</style><script>new Waline({avatarCDN:"https://sdn.geekzu.org/avatar/",dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],lang:"zh-cn",locale:{admin:"⭐"},placeholder:"在这里分享您的观点与想法，昵称、邮箱必填，邮件通知回复。",requiredMeta:["nick","mail"],serverURL:"https://comments.iamlm.com/",visitor:!0})</script></div></div></div></div><script src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script>
<script defer src="data:application/javascript,t=%5B%22scroll%22,%22wheel%22,%22touchstart%22,%22touchmove%22,%22touchenter%22,%22touchend%22,%22touchleave%22,%22mouseout%22,%22mouseleave%22,%22mouseup%22,%22mousedown%22,%22mousemove%22,%22mouseenter%22,%22mousewheel%22,%22mouseover%22%5D,function()%7Bvar%20t,e=!1;try%7Bt=Object.defineProperty(%7B%7D,%22passive%22,%7Bget:function()%7Be=!0%7D%7D),window.addEventListener(%22test%22,null,t),window.removeEventListener(%22test%22,null,t)%7Dcatch(e)%7B%7Dreturn%20e%7D()%26%26(o=EventTarget.prototype.addEventListener,e=o,EventTarget.prototype.addEventListener=function(o,r,n)%7Bvar%20s,a=%22object%22==typeof%20n%26%26null!==n,i=a?n.capture:n;(n=a?function(e)%7Bvar%20t=Object.getOwnPropertyDescriptor(e,%22passive%22);return%20t%26%26!0!==t.writable%26%26void%200===t.set?Object.assign(%7B%7D,e):e%7D(n):%7B%7D).passive=void%200!==(s=n.passive)?s:-1!==t.indexOf(o)%26%26!0,n.capture=void%200!==i%26%26i,e.call(this,o,r,n)%7D,EventTarget.prototype.addEventListener._original=e);var%20backToTop=function()%7Bconst%20$backToTop=$(%22%23back-to-top%22);$(window).scroll(function()%7B$(window).scrollTop()%3E100?$backToTop.fadeIn(1e3):$backToTop.fadeOut(1e3)%7D),$backToTop.click(function()%7B$(%22body,html%22).animate(%7BscrollTop:0%7D)%7D)%7D;function%20initToc()%7Bconst%20$toc=$(%22%23post-toc%22);$toc.length%26%26$(window).width()%3E=1080%26%26$(window).scroll(function()%7B$(window).scrollTop()%3E100?$toc.fadeIn(1e3):$toc.fadeOut(100)%7D)%7Dtoc=function()%7Bconst%20tocContainer=document.getElementById(%22post-toc%22);if(tocContainer!==null)%7Bconst%20toc=document.getElementById(%22TableOfContents%22);toc===null?tocContainer.parentNode.removeChild(tocContainer):initToc()%7D%7D,$(document).ready(function()%7BbackToTop(),toc()%7D),window.loadphotoswipejs%26%26window.alert(%22You've%20loaded%20load-photoswipe.js%20twice.%20See%20https://github.com/liwenyip/hugo-easy-gallery/issues/6%22);var%20e,t,o,toc,loadphotoswipejs=1;$(document).ready(function()%7Bvar%20items=%5B%5D;$(%22.post-content%20p%20%3E%20img,%20figure%22).each(function()%7Bvar%20$this=$(this),$a,$img,$src,$title,$msrc;if($this.attr(%22class%22)==%22no-photoswipe%22)return!0;if($this%5B0%5D.tagName===%22IMG%22?($src=$this%5B0%5D.src,$msrc=$this%5B0%5D.src,$title=$this%5B0%5D.alt):($a=$this.find(%22a%22),$img=$this.find(%22img%22),$src=$a.attr(%22href%22),$title=$img.attr(%22alt%22),$msrc=$img.attr(%22src%22)),$a%26%26$a.data(%22size%22))var%20$size=$a.data(%22size%22).split(%22x%22),item=%7Bsrc:$src,w:$size%5B0%5D,h:$size%5B1%5D,title:$title,msrc:$msrc%7D;else%7Bvar%20item=%7Bsrc:$src,w:800,h:600,title:$title,msrc:$msrc%7D,img=new%20Image;img.src=$src;var%20wait=setInterval(function()%7Bvar%20w=img.naturalWidth,h=img.naturalHeight;w%26%26h%26%26(clearInterval(wait),item.w=w,item.h=h)%7D,30)%7Dvar%20index=items.length;items.push(item),$this.on(%22click%22,function(event)%7Bevent.preventDefault();var%20$pswp=$(%22.pswp%22)%5B0%5D,options=%7Bindex,bgOpacity:.8,showHideOpacity:!0%7D;new%20PhotoSwipe($pswp,PhotoSwipeUI_Default,items,options).init()%7D)%7D)%7D),jQuery(document).ready(function($)%7B$(document).ready(function()%7Bif($(%22%23bber-talk%22).length%3E0)%7BjsonUrl=%22https://6c61-laomai-3gk8ukum10f3f137-1302442657.tcb.qcloud.la/json/bber.json%22,$.getJSON(jsonUrl+%22?t=%22+Date.parse(new%20Date),function(res)%7Bvar%20bberHtml='';$.each(res.data,function(i,item)%7Bd=new%20Date(item.date),date=d.getFullYear()+%22/%22+(d.getMonth()+1)+%22/%22+d.getDate()+%22%20%22+d.getHours()+%22:%22+d.getMinutes(),dataTime='%3Cspan%20class=%22datatime%22%3E'+date+%22%3C/span%3E%22,bberHtml+='%3Cli%20class=%22item%20item-'+(i+1)+'%22%3E'+dataTime+'%20%3Ca%20href=%22/bb%22%3E'+item.content+%22%3C/a%3E%3C/li%3E%22%7D),$(%22%23bber-talk%22).append('%3Cspan%20class=%22index-talk-icon%22%3E%3Csvg%20viewBox=%220%200%201024%201024%22%20width=%2226%22%20height=%2226%22%3E%3Cpath%20d=%22M184.32%20891.667692c-12.603077%200-25.206154-2.363077-37.809231-7.876923-37.021538-14.966154-59.864615-49.624615-59.864615-89.009231v-275.692307c0-212.676923%20173.292308-385.969231%20385.969231-385.969231h78.76923c212.676923%200%20385.969231%20173.292308%20385.969231%20385.969231%200%20169.353846-137.846154%20307.2-307.2%20307.2H289.083077l-37.021539%2037.021538c-18.904615%2018.116923-43.323077%2028.356923-67.741538%2028.356923zM472.615385%20195.347692c-178.018462%200-322.953846%20144.935385-322.953847%20322.953846v275.692308c0%2021.267692%2015.753846%2029.144615%2020.48%2031.507692%204.726154%202.363077%2022.055385%207.876923%2037.021539-7.08923l46.473846-46.473846c6.301538-6.301538%2014.178462-9.452308%2022.055385-9.452308h354.461538c134.695385%200%20244.184615-109.489231%20244.184616-244.184616%200-178.018462-144.935385-322.953846-322.953847-322.953846H472.615385z%22%3E%3C/path%3E%3Cpath%20d=%22M321.378462%20512m-59.076924%200a59.076923%2059.076923%200%201%200%20118.153847%200%2059.076923%2059.076923%200%201%200-118.153847%200Z%22%3E%3C/path%3E%3Cpath%20d=%22M518.301538%20512m-59.076923%200a59.076923%2059.076923%200%201%200%20118.153847%200%2059.076923%2059.076923%200%201%200-118.153847%200Z%22%3E%3C/path%3E%3Cpath%20d=%22M715.224615%20512m-59.076923%200a59.076923%2059.076923%200%201%200%20118.153846%200%2059.076923%2059.076923%200%201%200-118.153846%200Z%22%3E%3C/path%3E%3C/svg%3E%3C/span%3E%3Cul%20class=%22talk-list%22%3E'+bberHtml+%22%3C/ul%3E%22)%7D);function%20Roll()%7Bvar%20list_li=$(%22.talk-list%20li%22),cur_li=list_li.first(),last_li=list_li.last();last_li.after(cur_li)%7DsetInterval(Roll,6e3)%7D%7D)%7D)"></script>