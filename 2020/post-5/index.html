<!doctype html><html lang=zh-cn><meta charset=utf-8><meta name=renderer content="webkit"><meta name=force-rendering content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=preconnect href=https://cdn.staticfile.org><meta http-equiv=x-dns-prefetch-control content="on"><link rel=dns-prefetch href=//cdn.staticfile.org><link rel=preload href=/font/notoserifsc-regular-webfont.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/font/merriweather-regular-webfont.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/font/notoserifsc-regular-webfont.woff as=font type=font/woff crossorigin><link rel=preload href=/font/merriweather-regular-webfont.woff as=font type=font/woff crossorigin><title>在CentOS系统上搭建Git仓库</title><meta name=description content="一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！"><meta name=author content="老麦"><link rel=stylesheet href=https://iamlm.com/scss/laomai.min.b427c6a84afdd1017308c1593e91880fec61f17b609fbf0c032ee5f2f837fbd6.css integrity="sha256-tCfGqEr90QFzCMFZPpGID+xh8Xtgn78MAy7l8vg3+9Y=" rel="preload stylesheet" as=style><link rel=stylesheet href=https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><body style=background:url(https://cdn.qylao.com/wp-content/uploads/2022/04/sea-gc05b59c74_1920.jpg);background-size:cover;background-attachment:fixed><div class=container><div class=main-container><div class=tabs-main><input type=checkbox id=menu-btn>
<label for=menu-btn class=menu-icon><i class="fa fa-bars" aria-hidden=true></i></label><div class=main-header><div class=logo><img src=https://cdn.qylao.com/wp-content/uploads/2021/04/apple-touch-icon.png alt=老麦></div><div class=logo-con><p>一个简单的博客，一个平凡的博主，用最扑实的话记录最真实的自己！</div><div class=line1></div></div><div class=menu><ul class=tabs><li class=menu-item><a href=/>首页</a><li class=menu-item><a href=/archives/>文章</a><li class=menu-item><a href=/bb/>闲言</a><li class=menu-item><a href=/about/>关于</a><li class=menu-item><a href=/links/>友链</a></ul></div><div class=main-footer><p>&copy;2022老麦</p><span>已记录<span>116584</span>个字</span></div></div><div class=main-content><div class=content-header><h1>在CentOS系统上搭建Git仓库</h1></div><div class=line2><div class=post-time><time datetime=2020-07-09T23:07:35>2020-07-09</time></div></div><div class="content ahover"><h2 id=前言>前言</h2><p>前段时间决定重启博客，说句真心的，真的鼓足了勇气。毕竟放下了十年，以前的半吊子又重新回到新手村开启一步一步的探索之旅。既然重头来过，就接触一些以前没有接触过吧，<strong>静态博客</strong>。在网上仔细挑选了一番，基本定位在这三个工具：<h2 id=jekyll>Jekyll</h2><p><a href=http://jekyllrb.com/ target=_blank rel=noopener><strong>Jekyll</strong></a>做为GitHub Pages的构建工具（Ruby语言），使它成为最流行的静态网站生成工具，但缺点是这三个工具中生成页面的速度最慢的。<h2 id=hugo>Hugo</h2><p><a href=http://gohugo.io/ target=_blank rel=noopener><strong>Hugo</strong></a>是另一个流行的静态网站生成工具，它是使用go语言编写，并且使用Markdown语法，拥有最快的页面生成速度，缺点是主题不多（其实是没我喜欢的，哈哈哈）。<h2 id=hexo>Hexo</h2><p><a href=https://hexo.io/ target=_blank rel=noopener><strong>Hexo</strong></a>是用Node.js编写的博客框架，支持所有的GitHub Markdown特性，页面的生成速度介于前面两者中间。国人用的比较多，所以出问题会比较容易找到解决的方法！
基于自己能力、喜好等因素，最终决定选择Hexo。但在自己一步一步跟着网上的教程去搭建的过程中，还是踩了不少的坑，特别是在云服务器上创建git仓库过程中。其原因嘛，一是自己的理解能力有限（<strong>主要原因</strong>），二是网上的教程有的说不全，有的又太过于笼统。所以今天我就把自己的踩坑经历分享一下，当作记录也好，免得以后换云服务商的时候又忘记怎么搭建。<h2 id=搭建过程>搭建过程</h2><h3 id=1安装git>1.安装git</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>yum install git -y
</span></span></code></pre></div><p><p><img src=/2020/post-5/2020-07-09-194118_hu9aabba7a1d546e34615251ba796cebd0_47164_800x0_resize_q75_h2_lanczos_2.webp loading=lazy alt><h3 id=2创建一个git用户>2.创建一个git用户</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>adduser git
</span></span></code></pre></div><h3 id=设置git这个用户的密码>设置git这个用户的密码</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>passwd git
</span></span></code></pre></div><h3 id=3创建公钥保存文件>3.创建公钥保存文件</h3><h3 id=跳转到git目录>跳转到git目录</h3><p><p><img src=/2020/post-5/2020-07-09-215136_hu3e338be6375336ef7f227ffb578a0846_13956_800x0_resize_q75_h2_lanczos_2.webp loading=lazy alt><p>上图可以看到我是先CD到了git目录下再进行其他的操作，要注意的是我是在<strong>根目录</strong>上输入CD命令的。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>cd</span> home/git/
</span></span></code></pre></div><h3 id=切换到git用户>切换到git用户</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>su git
</span></span></code></pre></div><h3 id=创建ssh目录并给予700的权限>创建.ssh目录并给予700的权限</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>mkdir .ssh <span style=color:#ff79c6>&amp;&amp;</span> chmod <span style=color:#bd93f9>700</span> .ssh
</span></span></code></pre></div><h3 id=创建公钥保存文件并给予600的权限>创建公钥保存文件并给予600的权限</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>touch .ssh/authorized_keys <span style=color:#ff79c6>&amp;&amp;</span> chmod <span style=color:#bd93f9>600</span> .ssh/authorized_keys
</span></span></code></pre></div><h3 id=切换回root用户>切换回root用户</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>su root
</span></span></code></pre></div><p>输入密码后回车就行。
这里要说一下的是，如果你不想以后每次把通过hexo生成的静态文件推到你git仓库时都要输入密码的话，就要修改<u>authorized_keys</u>这个文件，修改方法如下：
以windows为例，安装git，官网地址：https://git-scm.com/downloads 根据你的系统选择64位还是32位，我想现在的都是用64位的系统吧。哈哈哈，下载好后打开安装，一直点“下一步”就好，如果你有特殊僻好的设置，请自行参考度娘去设置。安装完成好win+r运行CMD<h3 id=1配置用户名和邮箱>1.配置用户名和邮箱：</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>git config --global user.name <span style=color:#f1fa8c>&#34;你的用户名&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>git config --global user.email <span style=color:#f1fa8c>&#34;你的邮箱地址&#34;</span>
</span></span></code></pre></div><h3 id=2然后生成公钥和私钥>2.然后生成公钥和私钥</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>ssh-keygen -t rsa -C <span style=color:#f1fa8c>&#34;你的邮箱地址&#34;</span>
</span></span></code></pre></div><p>这时会叫你填写保存公钥和私钥文件的路径，记一下默认的路径，我的是这样子的<strong>c/user/skybb/.ssh/id_rsa</strong>。其中skybb是你电脑的用户名，我们选择默认的路径，按回车<h3 id=3根据上面提示的路径打开文件夹>3.根据上面提示的路径打开文件夹</h3><p><p><img src=/2020/post-5/2020-07-10-001403_hu2b66b58fc193ed128c9c0e09ce835236_15400_800x0_resize_q75_h2_lanczos_2.webp loading=lazy alt><p>id_rsa.pub为公钥，用notepad+打开的（记事本也行，网上说不好，反正我试过几次用记事本打开也没问题)，里面的内容就是我们要复制到<u>authorized_keys</u>这个文件里的。<h3 id=4回到云服务器的操作>4.回到云服务器的操作</h3><p><p><img src=/2020/post-5/2020-07-10-004902_hu852b1adc08bb9d667b733da1e761fd5d_3350_800x0_resize_q75_h2_lanczos_2.webp loading=lazy alt><p>输入<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>pwd</span>
</span></span></code></pre></div><p>确认我们是否在/home/git这个目录里<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>cd</span> .ssh
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>vim authorized_keys
</span></span></code></pre></div><p>按i进行编辑<p>把id_rsa.pub里面的内容复制到里面<p>按Esc，输入:wq退出<p>这样我们就将电脑上的公钥保存到你云服务器上了，以后将静态文件推到仓库时就不用每次都输入密码了。当然如果你觉得每次输入密码也无所谓的话，其实不修改<u>authorized_keys</u>也是没有问题的，这个我验证过。<h3 id=创建git仓库目录>创建git仓库目录</h3><p>上面有提到我们当前是在git的目录里吧。我们先退回上一层目录home<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>cd</span> ..
</span></span></code></pre></div><p>然后在home目录里建一个名为blog.git的仓库<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>git init --bare blog.git
</span></span></code></pre></div><h3 id=配置git-hooks>配置git hooks</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>vim blog.git/hooks/post-receive
</span></span></code></pre></div><p>按i编辑，复制下面内容<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>#!/bin/sh
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6></span>git --work-tree<span style=color:#ff79c6>=</span>/home/www/hexo --git-dir<span style=color:#ff79c6>=</span>/home/blog.git checkout -f
</span></span></code></pre></div><p>按Esc，输入:wq保存退出<p>这里要说的是，<strong>/home/www/hexo</strong>是我们存放hexo生成的静态文件目录，如果你想更改到其他路径，git hooks上复制的代码也要跟着更改。<p><p><img src=/2020/post-5/2020-07-10-012842_hu324741993859213555427d3599dce3aa_6396_800x0_resize_q75_h2_lanczos_2.webp loading=lazy alt><p>接下来是设置权限<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>chmod +x blog.git/hooks/post-receive
</span></span></code></pre></div><p>更改blog.git这个仓库的拥有人为git用户（怎么感觉这么绕，哈哈哈）<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>chown -R git:git blog.git
</span></span></code></pre></div><h3 id=创建上面已经关连的静态目录>创建上面已经关连的静态目录</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>mkdir www
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#8be9fd;font-style:italic>cd</span> www
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>mkdir hexo
</span></span></code></pre></div><p>设置hexo目录的权限与更改拥有人<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>chmod -R <span style=color:#bd93f9>755</span> hexo
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>chown -R git:git hexo
</span></span></code></pre></div><h3 id=安全设置>安全设置</h3><p>其实按上面设置完，你的仓库已经可以使用了，但为了安全考虑，我们应该要改一下git用户的相关登陆权限。<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>cd</span> ../..
</span></span></code></pre></div><p>退回到服务器的根目录<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>vim etc/passwd
</span></span></code></pre></div><p>按i进行编辑<p><p><img src=/2020/post-5/2020-07-09-215907_hudaa49781283f1555b17b0ef6f151d0aa_12722_800x0_resize_q75_h2_lanczos_2.webp loading=lazy alt><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>找到git:x:1000:1000::/home/git:/bin/bash   <span style=color:#6272a4># 这个1000有可能会不一样的，应该是ID数，我在另一台服务是1001</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>改为git:x:1000:1000::/home/git:/usr/bin/git-shell
</span></span></code></pre></div><p>按Esc，输入:wq保存退出<p>这样，git用户就只能连接git仓库进行推送与拉取的操作，不能登陆服务器并使用命令。<p><p><img src=/2020/post-5/2020-07-10-021738_huc0d66d784c2ef61927e85e1754d0ce1c_7396_800x0_resize_q75_h2_lanczos_2.webp loading=lazy alt><h3 id=搭建完成>搭建完成</h3><p>到此，服务器的git仓库已经搭建完成了，仓库地址为<em><strong>git@服务器ip:/home/blog.git</strong></em>。</div><div class="content-tags ahover"><ul><li><a href=/tags/hexo>#hexo</a><li><a href=/tags/git>#git</a><li><a href=/tags/linux>#linux</a><li><a href=/tags/centos>#CentOS</a></ul></div><nav class=post-nav><a class=prev href=/2020/post-6/><i class="fa fa-chevron-left" aria-hidden=true></i>
<span class="prev-text nav-default">在Windows上使用Hexo来搭建一个属于自己的博客</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/2020/post-4/><span class="next-text nav-default">恶梦般的游戏，万国觉醒。</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class="fa fa-chevron-right" aria-hidden=true></i></a></nav><div class=content-footer><script src=https://unpkg.com/@waline/client@v2/dist/waline.js></script>
<link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><div id=waline class=waline-container></div><style>:root{--waline-font-size:1rem;--waline-theme-color:rgba(0,0,0,0.7);--waline-active-color:#202020;--waline-badge-color:rgba(0,0,0,0.9)}.wl-power{display:none}.wl-emoji{width:1rem}.wl-card .wl-badge{display:inline-block;margin-right:1em;padding:0;border:0 solid var(--waline-badge-color);border-radius:0;color:var(--waline-badge-color);font-size:var(--waline-badge-font-size)}</style><script>Waline.init({avatarCDN:"https://sdn.geekzu.org/avatar/",dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.qylao.com/emojis/weibo"],lang:"zh-cn",locale:{admin:"🖊"},placeholder:"在这里分享您的观点与想法，昵称、邮箱必填，邮件通知回复。",requiredMeta:["nick","mail"],serverURL:"https://comments.iamlm.com/",visitor:!0})</script></div></div></div></div><script src=https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js></script>
<script defer src="data:application/javascript,var%20styleAuthorUrl=%60%0D%0Acolor:%20rgb(248,248,255);%0D%0Abackground-color:%20%238B8989;%0D%0Apadding:%205px%2010px;%0D%0Aborder-radius:%205px;%0D%0A%60,authorUrl=%22laomai.org%22;console.log(%60%25c$%7BauthorUrl%7D%60,styleAuthorUrl),window.loadphotoswipejs%26%26window.alert(%22You've%20loaded%20load-photoswipe.js%20twice.%20See%20https://github.com/liwenyip/hugo-easy-gallery/issues/6%22);var%20loadphotoswipejs=1;$(document).ready(function()%7Bvar%20items=%5B%5D;$(%22.post-content%20p%20%3E%20img,%20figure%22).each(function()%7Bvar%20$this=$(this),$a,$img,$src,$title,$msrc;if($this.attr(%22class%22)==%22no-photoswipe%22)return!0;if($this%5B0%5D.tagName===%22IMG%22?($src=$this%5B0%5D.src,$msrc=$this%5B0%5D.src,$title=$this%5B0%5D.alt):($a=$this.find(%22a%22),$img=$this.find(%22img%22),$src=$a.attr(%22href%22),$title=$img.attr(%22alt%22),$msrc=$img.attr(%22src%22)),$a%26%26$a.data(%22size%22))var%20$size=$a.data(%22size%22).split(%22x%22),item=%7Bsrc:$src,w:$size%5B0%5D,h:$size%5B1%5D,title:$title,msrc:$msrc%7D;else%7Bvar%20item=%7Bsrc:$src,w:800,h:600,title:$title,msrc:$msrc%7D,img=new%20Image;img.src=$src;var%20wait=setInterval(function()%7Bvar%20w=img.naturalWidth,h=img.naturalHeight;w%26%26h%26%26(clearInterval(wait),item.w=w,item.h=h)%7D,30)%7Dvar%20index=items.length;items.push(item),$this.on(%22click%22,function(event)%7Bevent.preventDefault();var%20$pswp=$(%22.pswp%22)%5B0%5D,options=%7Bindex,bgOpacity:.8,showHideOpacity:!0%7D;new%20PhotoSwipe($pswp,PhotoSwipeUI_Default,items,options).init()%7D)%7D)%7D)"></script>